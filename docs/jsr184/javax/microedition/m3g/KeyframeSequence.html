<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.4.2_08) on Thu Jun 30 13:21:20 EEST 2005 -->
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<TITLE>
KeyframeSequence (Mobile 3D Graphics API (M3G))
</TITLE>

<META NAME="keywords" CONTENT="javax.microedition.m3g.KeyframeSequence class">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="KeyframeSequence (Mobile 3D Graphics API (M3G))";
}
</SCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/KeyframeSequence.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
<EM><B>M3G 1.1 -- Jun 22, 2005</B></EM></EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../javax/microedition/m3g/IndexBuffer.html" title="class in javax.microedition.m3g"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../javax/microedition/m3g/Light.html" title="class in javax.microedition.m3g"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="KeyframeSequence.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
javax.microedition.m3g</FONT>
<BR>
Class KeyframeSequence</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../resources/inherit.gif" ALT="extended by"><A HREF="../../../javax/microedition/m3g/Object3D.html" title="class in javax.microedition.m3g">javax.microedition.m3g.Object3D</A>
      <IMG SRC="../../../resources/inherit.gif" ALT="extended by"><B>javax.microedition.m3g.KeyframeSequence</B>
</PRE>
<HR>
<DL>
<DT>public class <B>KeyframeSequence</B><DT>extends <A HREF="../../../javax/microedition/m3g/Object3D.html" title="class in javax.microedition.m3g">Object3D</A></DL>

<P>
<p>Encapsulates animation data as a sequence of time-stamped, vector-valued
keyframes. Each keyframe represents the value of an animated quantity at a
specific time instant.</p>

<p>A KeyframeSequence can be associated with multiple <i>animation
targets</i>, that is, animatable object properties, via multiple
AnimationTrack objects. Available animation targets include node and
texture transformations, Material parameters, Camera parameters, and
so on. When applying an animation to its target, the actual value for
the target is derived by interpolating the keyframe values in the
associated KeyframeSequence object.</p>

<p>The number of vector components per keyframe is specified in the
constructor and is the same for all keyframes in the sequence. The
interpretation of the keyframes is determined by the animation
target(s) the sequence is attached to. For example, 4-component
keyframes are interpreted as quaternions when applied to the
<code>ORIENTATION</code> target.</p>

<p>Five different functions are available for interpolating the
keyframe values: <code>LINEAR</code> and <code>SPLINE</code>, their
quaternion equivalents <code>SLERP</code> and <code>SQUAD</code>; and
the simple <code>STEP</code> function. Each of these is described in
the Field Summary. There are also two repeat modes, <code>LOOP</code>
and <code>CONSTANT</code>, that affect the interpolation.</p>

<h3>Sequence time vs. world time</h3>

<p>The internal <i>sequence time</i> t of a KeyframeSequence is derived
from world time by its associated AnimationController(s). The formula
for mapping world times to sequence times is given in the "Timing and
speed control" section of the AnimationController class description.
The sequence time is then used for interpolating between keyframe values
as defined by the chosen interpolation function.</p>

<p>All (valid) keyframes in a KeyframeSequence must fall within a
sequence time range of [0, D], where D is the duration of the keyframe
sequence. The duration can be set with the <code>setDuration</code>
method. For sequences using the <code>LOOP</code> repeat mode, the
sequence time t is restricted into this range via a modulo operation,
that is, by adding or subtracting a multiple of D such that 0 &lt;= t
&lt; D. For sequences using the <code>CONSTANT</code> mode, the value
of t is unrestricted.</p>

<h3>Sequence repeat modes</h3>

<p>The first valid keyframe in a <code>CONSTANT</code> sequence defines
the interpolated value returned before this point in time. That is, with
initial value <b>v</b><sub>0</sub> at time t<sub>0</sub>, the
interpolated value <b>v</b> = <b>v</b><sub>0</sub> for values of time
t such that t &lt; t<sub>0</sub>.</p>

<p>The final valid keyframe in a <code>CONSTANT</code> sequence defines
the interpolated value returned after this point in time. That is, with
final value <b>v</b><sub>N-1</sub> at time t<sub>N-1</sub>, the interpolated
value <b>v</b> = <b>v</b><sub>N-1</sub> for values of time t such
that t &gt;= t<sub>N-1</sub>.</p>

<p>A sequence using the <code>LOOP</code> repeat mode is interpolated
as if the keyframes were replicated backward and forward indefinitely
at a spacing equal to the given duration of the sequence. In this
case, a keyframe which appears at time t will be treated as if it also
appeared at time t + nD where n is any positive or negative integer
and D is the duration of a single loop of the animation, given in
<code>setDuration</code>. Note that this is <i>not</i> achieved by
just the modulo operation on the sequence time described above.</p>

<p>In a looping sequence with N keyframes numbered [0, N-1], the
successor of keyframe N-1 is keyframe 0, and the predecessor to
keyframe 0 is keyframe N-1.</p>

<h3>Coincident keyframes</h3>

<p>The specification allows several keyframes to coexist at the same
position in time. This allows discontinuities in the animation
sequences, which can be useful for example in incorporating cuts to
camera animation. In the case of several keyframes coinciding, the one
with the lowest index is always used for the final value of segments
ending at that position in time; for segments starting at that
position, the keyframe with the highest index is used for the starting
value. For sequences in <code>LOOP</code> mode, the keyframes from the
next or previous repeat of the sequence may also coincide with the
keyframes of the current repeat if they are at the very end or very
beginning of the sequence. The keyframes in the previous repeat are
then treated as having lower indices, and the keyframes in the next
repeat as having higher indices, than the keyframes in the current
repeat.</p>

<p>Note that although any number of coincident keyframes can be
specified, a maximum of four will ever be used in <code>SPLINE</code>
or <code>SQUAD</code> interpolation; two in <code>LINEAR</code> or
<code>SLERP</code> interpolation; and only the one with the highest
index in <code>STEP</code> interpolation.</p>

<h3>Deferred exceptions</h3>

<p>The validity of a keyframe sequence can be fully verified only when
it is applied to an animation target, that is, in the <code>animate</code>
method of Object3D. Any of the following conditions in a KeyframeSequence
will then trigger an IllegalStateException:</p>

<ul>
<li>Duration of sequence not set;</li>
<li>Duration less than the time of the last valid keyframe;</li>
<li>Any keyframe times within the valid range in decreasing order.</li>
</ul>

<h3>Implementation guidelines</h3>

<p>Although independent of the keyframe values as such, the interpolation
type and the repeat mode of a sequence are set here rather than in the
AnimationTrack objects using the sequence. This is so that the implementation
can sensibly cache spline tangents or other auxiliary data potentially
required at runtime.</p>
<P>

<P>
<DL>
<DT><B>See Also:</B><DD><a href="../../../file-format.html#KeyframeSequence">Binary format</a>, 
<a href="AnimationController.html#Example">Example</a>, 
<A HREF="../../../javax/microedition/m3g/AnimationTrack.html" title="class in javax.microedition.m3g"><CODE>AnimationTrack</CODE></A>, 
<A HREF="../../../javax/microedition/m3g/AnimationController.html" title="class in javax.microedition.m3g"><CODE>AnimationController</CODE></A></DL>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->


<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Field Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#CONSTANT">CONSTANT</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A parameter to <code>setRepeatMode</code>, specifying that
 this sequence is to be played back just once and not repeated.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#LINEAR">LINEAR</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A constructor parameter that specifies linear interpolation
 between keyframes.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#LOOP">LOOP</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A parameter to <code>setRepeatMode</code>, specifying that
 this sequence is to be repeated indefinitely.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#SLERP">SLERP</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A constructor parameter that specifies spherical linear
 interpolation of quaternions.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#SPLINE">SPLINE</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A constructor parameter that specifies spline interpolation
 between keyframes. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#SQUAD">SQUAD</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A constructor parameter that specifies spline interpolation
 of quaternions.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#STEP">STEP</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A constructor parameter that specifies stepping from one
 keyframe value to the next. </TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#KeyframeSequence(int, int, int)">KeyframeSequence</A></B>(int&nbsp;numKeyframes,
                 int&nbsp;numComponents,
                 int&nbsp;interpolation)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Constructs a new keyframe sequence with specified
 interpolation method, number of components per keyframe, and
 number of keyframes. </TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Method Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#getComponentCount()">getComponentCount</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="new">Returns the number of components per keyframe in
 this sequence.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#getDuration()">getDuration</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets the duration of this sequence.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#getInterpolationType()">getInterpolationType</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="new">Returns the type of interpolation for this
 sequence.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#getKeyframe(int, float[])">getKeyframe</A></B>(int&nbsp;index,
            float[]&nbsp;value)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="new">Retrieves the time stamp and value of a single keyframe.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#getKeyframeCount()">getKeyframeCount</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="new">Returns the total number of keyframes in this
 sequence.  </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#getRepeatMode()">getRepeatMode</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retrieves the current repeat mode of this KeyframeSequence.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#getValidRangeFirst()">getValidRangeFirst</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="new">Returns the first keyframe of the current valid
 range for this sequence.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#getValidRangeLast()">getValidRangeLast</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="new">Returns the last keyframe of the current valid
 range for this sequence.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#setDuration(int)">setDuration</A></B>(int&nbsp;duration)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the duration of this sequence in sequence time units. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#setKeyframe(int, int, float[])">setKeyframe</A></B>(int&nbsp;index,
            int&nbsp;time,
            float[]&nbsp;value)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the time position and value of the specified
 keyframe. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#setRepeatMode(int)">setRepeatMode</A></B>(int&nbsp;mode)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the repeat mode of this KeyframeSequence. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#setValidRange(int, int)">setValidRange</A></B>(int&nbsp;first,
              int&nbsp;last)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Selects the range of keyframes that are included in the
 animation. </TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_javax.microedition.m3g.Object3D"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class javax.microedition.m3g.<A HREF="../../../javax/microedition/m3g/Object3D.html" title="class in javax.microedition.m3g">Object3D</A></B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../javax/microedition/m3g/Object3D.html#addAnimationTrack(javax.microedition.m3g.AnimationTrack)">addAnimationTrack</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#animate(int)">animate</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#duplicate()">duplicate</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#find(int)">find</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#getAnimationTrack(int)">getAnimationTrack</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#getAnimationTrackCount()">getAnimationTrackCount</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#getReferences(javax.microedition.m3g.Object3D[])">getReferences</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#getUserID()">getUserID</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#getUserObject()">getUserObject</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#removeAnimationTrack(javax.microedition.m3g.AnimationTrack)">removeAnimationTrack</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#setUserID(int)">setUserID</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#setUserObject(java.lang.Object)">setUserObject</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Field Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="LINEAR"><!-- --></A><H3>
LINEAR</H3>
<PRE>
public static final int <B>LINEAR</B></PRE>
<DL>
<DD><p>A constructor parameter that specifies linear interpolation
 between keyframes.</p>

 <p>For a keyframe with value <b>v</b><sub>i</sub> at time
 t<sub>i</sub>, where the following keyframe has a value
 <b>v</b><sub>i+1</sub> at time t<sub>i+1</sub>, the interpolated
 value <b>v</b> is defined only for values of time t such that
 t<sub>i</sub> &lt;= t &lt; t<sub>i+1</sub>, as follows:</p>

 <ul>
 <b>v</b> = (1-s)<b>v</b><sub>i</sub> + s<b>v</b><sub>i+1</sub>
 </ul>

 <p>where s is an interpolation factor in [0, 1) computed from
 the keyframe times:</p>
 
 <ul>
 s = (t - t<sub>i</sub>) / (t<sub>i+1</sub> - t<sub>i</sub>)
 </ul>
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../constant-values.html#javax.microedition.m3g.KeyframeSequence.LINEAR">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="SLERP"><!-- --></A><H3>
SLERP</H3>
<PRE>
public static final int <B>SLERP</B></PRE>
<DL>
<DD><p>A constructor parameter that specifies spherical linear
 interpolation of quaternions.</p>

 <p>This type of interpolation will interpolate at constant
 speed along the shortest "great circle" path between two
 <span class="new">keyframe values along the surface of the
 hypersphere of unit quaternions.</span></p>

 <p>Spherical linear interpolation between two keyframe values
 <b>q</b><sub>i</sub> and <b>q</b><sub>i+1</sub> is defined
 as:</p>

 <ul>
 slerp(s; <b>q</b><sub>i</sub>, <b>q</b><sub>i+1</sub>)
     = (<b>q</b><sub>i</sub> sin((1-s)a)
     + <b>q</b><sub>i+1</sub> sin(sa)) / sin(a)
 </ul>

 <p>where a is the angle between the two quaternions and s
 is the interpolation factor defined for <code>LINEAR</code>
 interpolation.</p>

 <p class="new">Note that the shortest path between two
 quaternions is not the same as the shortest path between
 the corresponding 3D orientations.  There are always two
 quaternions corresponding to a single 3D orientation, each of
 which denotes a different direction of interpolation along the
 great circle; thus, quaternions can encode up to 360 degrees of
 rotation between adjacent keyframes.</p>

 <p class="new">It is common practice in some applications to
 precondition quaternions prior to slerping so that the shorter
 interpolation path in 3D is always chosen.  While this is
 useful in special cases, it does <em>not</em> yield the same
 result in general, and is therefore incompatible with more
 advanced features such as animation blending.  Hence,
 implementations are explicitly disallowed from incorporating
 this practice, and <em>must</em> implement the general slerp
 routine instead.  Authoring tools, however, are encouraged to
 present the preconditioning as an option when exporting
 keyframe data.</p>
 
 <p>Also note that interpolation between diametrically opposed
 quaternions in successive keyframes is undefined. It is
 recommended that authoring tools should take steps to warn
 designers if this case is detected.</p>
 
 <p>More details can be found in "Quaternion Algebra and
 Calculus" by David Eberly [see <a
 href="../../../overview-summary.html#Literature">Related
 Literature</a>].</p>
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../constant-values.html#javax.microedition.m3g.KeyframeSequence.SLERP">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="SPLINE"><!-- --></A><H3>
SPLINE</H3>
<PRE>
public static final int <B>SPLINE</B></PRE>
<DL>
<DD><p>A constructor parameter that specifies spline interpolation
 between keyframes. The keyframes will be interpolated with a
 Catmull-Rom spline adjusted to accommodate non-constant
 keyframe intervals.</p>

 <p>For each curve segment i, we have the values
 <b>v</b><sub>i</sub> at time t<sub>i</sub>, and
 <b>v</b><sub>i+1</sub> at time t<sub>i+1</sub>. We also define
 tangents at the end points of the segment: <b>T</b><sub>i</sub>
 at the start point, and <b>T</b><sub>i+1</sub> at the end
 point.</p>

 <p>Using the interpolation factor s defined for
 <code>LINEAR</code> interpolation, we can then
 express the interpolation of the curve as follows:</p>

 <ul>
 <table cellpadding="0" cellspacing="0">
 <tr>
 
 <td width="30" align="center">
 <b>S</b> =
 </td>
 <td align="right">
 | <code>s</code><sup><code>3</code></sup> |<br>
 | <code>s</code><sup><code>2</code></sup> |<br>
 | <code>s</code><sup><code>&nbsp;</code></sup> |<br>
 | <code>1</code><sup><code>&nbsp;</code></sup> |<br>
 </td>

 <td width="40"/>
 
 <td width="30" align="center">
 <b>H</b> =
 </td>
 <td align="right">
 <code>| &nbsp;2      -2 &nbsp;1 &nbsp;1 &nbsp;|</code><br>
 <code>|      -3 &nbsp;3      -2      -1 &nbsp;|</code><br>
 <code>| &nbsp;0 &nbsp;0 &nbsp;1 &nbsp;0 &nbsp;|</code><br>
 <code>| &nbsp;1 &nbsp;0 &nbsp;0 &nbsp;0 &nbsp;|</code><br>
 </td>

 <td width="40"/>

 <td width="30" align="center">
 <b>C</b> =
 </td>
 <td align="right">
 | <code><b>v</b></code><sub><code>i &nbsp;&nbsp;</code></sub> |<br>
 | <code><b>v</b></code><sub><code>i+1&nbsp;</code></sub> |<br>
 | <code><b>T</b></code><sup><code>0</code></sup><sub><code>i &nbsp;</code></sub> |<br>
 | <code><b>T</b></code><sup><code>1</code></sup><sub><code>i+1</code></sub> |<br>
 </td>

 </tr> 
 </table>
 </ul>
 
 <p>The value <b>v</b><sub>s</sub> of the curve at position s
 can be calculated using the formula:</p>

 <ul>
 <b>v</b><sub>s</sub> = <b>S</b><sup>T</sup> <b>H</b> <b>C</b>
 </ul>

 <p>The only thing left to define is the calculation of the
 tangent vectors <b>T</b><sup>{0,1}</sup><sub>i</sub>. A
 standard Catmull-Rom spline assumes that the keyframe values
 are evenly spaced in time, and calculates the tangents as
 centered finite differences of the adjacent keyframes:</p>

 <ul>
 <b>T</b><sub>i</sub> = (<b>v</b><sub>i+1</sub> -
         <b>v</b><sub>i-1</sub>) / 2
 </ul>
 
 <p>We apply additional scaling values to compensate for
 irregular keyframe timing, and the final tangents are:</p>

 <ul class="new">
 <b>T</b><sup>0</sup><sub>i</sub> =
         <b>F<sup> -</sup></b><sub>i</sub> <b>T</b><sub>i</sub><br>
 <b>T</b><sup>1</sup><sub>i</sub> =
         <b>F<sup> +</sup></b><sub>i</sub> <b>T</b><sub>i</sub>
 </ul>

 <p>where:</p>

 <ul>
 <b>F<sup> -</sup></b><sub>i</sub> = 2 (t<sub>i+1</sub> - t<sub>i</sub>)
    / (t<sub>i+1</sub> - t<sub>i-1</sub>)<br>
 <b>F<sup> +</sup></b><sub>i</sub> = 2 (t<sub>i</sub> - t<sub>i-1</sub>)
    / (t<sub>i+1</sub> - t<sub>i-1</sub>)<br>
 <b>F<sup> -</sup></b><sub>0</sub> =
    <b>F<sup> +</sup></b><sub>0</sub> =
    <b>F<sup> -</sup></b><sub>N-1</sub> =
    <b>F<sup> +</sup></b><sub>N-1</sub> = 0,
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in a <code>CONSTANT</code> sequence
 </ul>
 
 <p>It is relatively easy to convert to this representation from
 piecewise Bezier splines (as used by 3ds max, for example) as
 long as the tangents are set up according to the above scheme.
 Conversion from other interpolating spline forms may not be
 exact, although any interpolating spline is guaranteed to pass
 through the keyframe values.</p>
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../constant-values.html#javax.microedition.m3g.KeyframeSequence.SPLINE">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="SQUAD"><!-- --></A><H3>
SQUAD</H3>
<PRE>
public static final int <B>SQUAD</B></PRE>
<DL>
<DD><p>A constructor parameter that specifies spline interpolation
 of quaternions.</p>

 <p>This interpolation method is similar to the
 <code>SPLINE</code> method, but using equivalent quaternion
 operations. The tangents for each keyframe are computed as
 centered finite differences, only this time via quaternion
 logarithms:</p>

 <ul>
 <b>T</b><sub>n</sub>
   = ( log(<b>q</b><sub>i</sub><sup>-1</sup> <b>q</b><sub>i+1</sub>)
   +  log(<b>q</b><sub>i-1</sub><sup>-1</sup> <b>q</b><sub>i</sub>)
   ) / 2
 </ul>

 <p>Note that the operations above are <em>not</em> to be
 confused with scalar or vector operations. The notation
 <b>q</b><sup>-1</sup> denotes the inverse of quaternion
 <b>q</b>; the multiplications are quaternion multiplications;
 and the logarithm is a quaternion logarithm, which essentially
 yields a 3-vector as a result.</p>

 <p class="new">Keyframe tangents are scaled to compensate for
 irregular keyframe timing as specified for <code>SPLINE</code>
 interpolation.  This yields the "incoming" tangent
 <b>T</b><sup>0</sup><sub>i</sub> and the "outgoing" tangent
 <b>T</b><sup>1</sup><sub>i</sub>.  From the scaled tangents,
 intermediate quaternion values <b>a</b> and <b>b</b> are
 computed for use in interpolating the curve segments starting
 and ending at each keyframe:</p>
 
 <ul>
 <b>a</b><sub>i</sub> = <b>q</b><sub>i</sub>
   exp( (<b>T</b><sup>0</sup><sub>i</sub>
   - log(<b>q</b><sub>i</sub><sup>-1</sup> <b>q</b><sub>i+1</sub>))
   / 2 )<br>
 <b>b</b><sub>i</sub> = <b>q</b><sub>i</sub>
   exp( (log(<b>q</b><sub>i-1</sub><sup>-1</sup> <b>q</b><sub>i</sub>)
   - <b>T</b><sup>1</sup><sub>i</sub>)
   / 2 )
 </ul>

 <p>Finally, the interpolated value <b>q</b> at position s
 (as defined in <code>LINEAR</code>) for a curve segment
 between keyframes i and i + 1 is obtained by using
 <code>SLERP</code> interpolation, as follows:</p>

 <ul>
 <b>q</b> = slerp( 2s(1 - s);
              slerp(s; <b>q</b><sub>i</sub>, <b>q</b><sub>i+1</sub>),
              slerp(s; <b>a</b><sub>i</sub>, <b>b</b><sub>i+1</sub>) )
 </ul>

 <p>For more information, refer to "Key Frame Interpolation via
 Splines and Quaternions" by David Eberly [see <a href=
 "../../../overview-summary.html#Literature">Related
 Literature</a>].</p>
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../constant-values.html#javax.microedition.m3g.KeyframeSequence.SQUAD">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="STEP"><!-- --></A><H3>
STEP</H3>
<PRE>
public static final int <B>STEP</B></PRE>
<DL>
<DD><p>A constructor parameter that specifies stepping from one
 keyframe value to the next. The actual value of each keyframe
 is used, without further interpolation, from the time position
 of that keyframe until the time of the next keyframe.</p>

 <p>For a keyframe with value <b>v</b> at time t<sub>i</sub>,
 where the following keyframe is at time t<sub>i+1</sub>,
 the value <b>v</b> is valid for all values of time t
 such that t<sub>i</sub> &lt;= t &lt; t<sub>i+1</sub>.</p>
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../constant-values.html#javax.microedition.m3g.KeyframeSequence.STEP">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="CONSTANT"><!-- --></A><H3>
CONSTANT</H3>
<PRE>
public static final int <B>CONSTANT</B></PRE>
<DL>
<DD><p>A parameter to <code>setRepeatMode</code>, specifying that
 this sequence is to be played back just once and not repeated.</p>
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../constant-values.html#javax.microedition.m3g.KeyframeSequence.CONSTANT">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="LOOP"><!-- --></A><H3>
LOOP</H3>
<PRE>
public static final int <B>LOOP</B></PRE>
<DL>
<DD><p>A parameter to <code>setRepeatMode</code>, specifying that
 this sequence is to be repeated indefinitely.</p>
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../constant-values.html#javax.microedition.m3g.KeyframeSequence.LOOP">Constant Field Values</A></DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="KeyframeSequence(int, int, int)"><!-- --></A><H3>
KeyframeSequence</H3>
<PRE>
public <B>KeyframeSequence</B>(int&nbsp;numKeyframes,
                        int&nbsp;numComponents,
                        int&nbsp;interpolation)</PRE>
<DL>
<DD><p>Constructs a new keyframe sequence with specified
 interpolation method, number of components per keyframe, and
 number of keyframes. All keyframes are initialized to the zero
 vector, with a time stamp of zero. The repeat mode is initially
 <code>CONSTANT</code> (not looping), with an undefined duration
 and the valid range spanning all keyframes.</p>

 <p>A newly constructed sequence cannot be used in animation
 until the duration of the sequence has been set. The valid
 range, that is, the range of keyframes that are included in the
 animation, can be set with <code>setValidRange</code>. This may
 be desirable if keyframes are generated dynamically or streamed
 over the network.</p>
 
 <p>The interpolation method is one of the symbolic constants
 defined above. The method must be compatible with the number
 of components in the keyframes. <code>STEP</code>,
 <code>LINEAR</code> and <code>SPLINE</code> can be specified
 for any type of keyframes. On the other hand, <code>SLERP</code>
 and <code>SQUAD</code> can only be specified for 4-component
 keyframes, which are then interpreted as quaternions.</p>
<P>
<DT><B>Parameters:</B><DD><CODE>numKeyframes</CODE> - number of keyframes to allocate for this sequence<DD><CODE>numComponents</CODE> - number of components in each keyframe vector<DD><CODE>interpolation</CODE> - one of the interpolation modes listed above
<DT><B>Throws:</B>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if <code>numKeyframes &lt; 1</code>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if <code>numComponents &lt; 1</code>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if <code>interpolation</code> is not
         one of <code>LINEAR, SLERP, SPLINE, SQUAD, STEP</code>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if <code>interpolation</code>
         is not a valid interpolation mode for keyframes of size
         <code>numComponents</code></DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Method Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="getComponentCount()"><!-- --></A><H3>
getComponentCount</H3>
<PRE>
public int <B>getComponentCount</B>()</PRE>
<DL>
<DD><span class="new">Returns the number of components per keyframe in
 this sequence.</span>
<P>
<DD><DL>

<DT><B>Returns:</B><DD><span class="new">the number of components</span><DT><B>Since:</B></DT>
  <DD><span class="new">M3G 1.1</span></DD>
</DL>
</DD>
</DL>
<HR>

<A NAME="getKeyframeCount()"><!-- --></A><H3>
getKeyframeCount</H3>
<PRE>
public int <B>getKeyframeCount</B>()</PRE>
<DL>
<DD><span class="new">Returns the total number of keyframes in this
 sequence.  Note that there may be fewer keyframes currently
 used for animation, controlled by the valid range.</span>
<P>
<DD><DL>

<DT><B>Returns:</B><DD><span class="new">the number of keyframes</span><DT><B>Since:</B></DT>
  <DD><span class="new">M3G 1.1</span></DD>
<DT><B>See Also:</B><DD><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#setValidRange(int, int)"><CODE><span class="new">setValidRange</span></CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="getInterpolationType()"><!-- --></A><H3>
getInterpolationType</H3>
<PRE>
public int <B>getInterpolationType</B>()</PRE>
<DL>
<DD><span class="new">Returns the type of interpolation for this
 sequence.</span>
<P>
<DD><DL>

<DT><B>Returns:</B><DD><span class="new">the interpolation type; one of
 <code>LINEAR, SLERP, SPLINE, SQUAD, STEP</code></span><DT><B>Since:</B></DT>
  <DD><span class="new">M3G 1.1</span></DD>
</DL>
</DD>
</DL>
<HR>

<A NAME="setKeyframe(int, int, float[])"><!-- --></A><H3>
setKeyframe</H3>
<PRE>
public void <B>setKeyframe</B>(int&nbsp;index,
                        int&nbsp;time,
                        float[]&nbsp;value)</PRE>
<DL>
<DD><p>Sets the time position and value of the specified
 keyframe. The keyframe value is copied in from the given
 array. The length of the array must be at least equal to the
 size of a keyframe (<code>numComponents</code>). Refer to
 AnimationTrack documention for the order in which the keyframe
 components should be stored in the array for a particular
 target property.</p>

 <p>If the interpolation type is <code>SLERP</code> or
 <code>SQUAD</code>, the keyframes are automatically normalized
 to yield unit quaternions for interpolation.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>index</CODE> - index of the keyframe to set<DD><CODE>time</CODE> - time position of the keyframe, in sequence time units<DD><CODE>value</CODE> - float array containing the keyframe value vector
<DT><B>Throws:</B>
<DD><CODE>java.lang.NullPointerException</CODE> - if <code>value</code> is null
<DD><CODE>java.lang.IndexOutOfBoundsException</CODE> - if <code>(index &lt; 0) ||
         (index &gt;= <span class="new">getKeyframeCount</span>)</code>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if <code>value.length &lt;
         <span class="new">getComponentCount</span></code>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if <code>time &lt; 0</code><DT><B>See Also:</B><DD><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#getKeyframe(int, float[])"><CODE><span class="new">getKeyframe</span></CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="getKeyframe(int, float[])"><!-- --></A><H3>
getKeyframe</H3>
<PRE>
public int <B>getKeyframe</B>(int&nbsp;index,
                       float[]&nbsp;value)</PRE>
<DL>
<DD><span class="new">Retrieves the time stamp and value of a single keyframe.</span>

 <p class="new">Note that if the interpolation type is SLERP or SQUAD, the
 keyframes are automatically normalized upon setting. The values returned
 here may therefore be different from the original input values.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>index</CODE> - <span class="new">index of the keyframe to retrieve</span><DD><CODE>value</CODE> - <span class="new">float array to store the keyframe value
        vector, or null to only return the time stamp</span>
<DT><B>Returns:</B><DD><span class="new">the time value of the keyframe</span>
<DT><B>Throws:</B>
<DD><CODE>java.lang.IndexOutOfBoundsException</CODE> - <span class="new">if <code>(index &lt; 0)
         || (index &gt;= getKeyframeCount)</code></span>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - <span class="new">if <code>(value != null)
         && (value.length &lt; getComponentCount)</code></span><DT><B>Since:</B></DT>
  <DD><span class="new">M3G 1.1</span></DD>
<DT><B>See Also:</B><DD><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#setKeyframe(int, int, float[])"><CODE><span class="new">setKeyframe</span></CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="setValidRange(int, int)"><!-- --></A><H3>
setValidRange</H3>
<PRE>
public void <B>setValidRange</B>(int&nbsp;first,
                          int&nbsp;last)</PRE>
<DL>
<DD><p>Selects the range of keyframes that are included in the
 animation. Keyframes outside of that range are ignored by the
 <code>animate</code> method in Object3D.</p>

 <p>Setting the valid range shorter than the whole sequence enables
 the application to use the sequence as a circular buffer when
 generating new keyframe data on the fly, for example. In a typical
 case, however, the valid range would span the whole sequence.</p>

 <p>The valid keyframe range is always interpreted in the direction
 of ascending indices. If <code>first &lt;= last</code>, the valid
 keyframes are those at the indices:</p>

 <ul><code>first, first+1, ..., last</code></ul>

 <p>If <code>last &lt; first</code>, the valid range wraps around and
 the valid keyframe indices are:</p>

 <ul>
 <code>
 first, first+1, ..., <span class="new">getKeyframeCount()</span>-1, 0, 1, ..., last
 </code>
 </ul>

 <p>The time position of each keyframe in the active range must
 be greater than or equal to that of the preceding keyframe; if
 this is not the case, <A HREF="../../../javax/microedition/m3g/Object3D.html#animate(int)"><CODE>Object3D.animate</CODE></A>
 will throw an exception. The time stamps must be in non-decreasing
 order, because otherwise the interpolated values between keyframes
 would be undefined. Note that having two or more keyframes with the
 same time stamp is specifically allowed.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>first</CODE> - index of the first valid keyframe<DD><CODE>last</CODE> - index of the last valid keyframe
<DT><B>Throws:</B>
<DD><CODE>java.lang.IndexOutOfBoundsException</CODE> - if <code>(first &lt; 0) ||
         (first &gt;= <span class="new">getKeyframeCount</span>)</code>
<DD><CODE>java.lang.IndexOutOfBoundsException</CODE> - if <code>(last &lt; 0) ||
         (last &gt;= <span class="new">getKeyframeCount</span>)</code><DT><B>See Also:</B><DD><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#getValidRangeFirst()"><CODE><span class="new">getValidRangeFirst</span></CODE></A>, 
<A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#getValidRangeLast()"><CODE><span class="new">getValidRangeLast</span></CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="getValidRangeFirst()"><!-- --></A><H3>
getValidRangeFirst</H3>
<PRE>
public int <B>getValidRangeFirst</B>()</PRE>
<DL>
<DD><span class="new">Returns the first keyframe of the current valid
 range for this sequence.</span>
<P>
<DD><DL>

<DT><B>Returns:</B><DD><span class="new">the index of the first valid keyframe</span><DT><B>Since:</B></DT>
  <DD><span class="new">M3G 1.1</span></DD>
<DT><B>See Also:</B><DD><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#setValidRange(int, int)"><CODE><span class="new">setValidRange</span></CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="getValidRangeLast()"><!-- --></A><H3>
getValidRangeLast</H3>
<PRE>
public int <B>getValidRangeLast</B>()</PRE>
<DL>
<DD><span class="new">Returns the last keyframe of the current valid
 range for this sequence.</span>
<P>
<DD><DL>

<DT><B>Returns:</B><DD><span class="new">the index of the last valid keyframe</span><DT><B>Since:</B></DT>
  <DD><span class="new">M3G 1.1</span></DD>
<DT><B>See Also:</B><DD><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#setValidRange(int, int)"><CODE><span class="new">setValidRange</span></CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="setDuration(int)"><!-- --></A><H3>
setDuration</H3>
<PRE>
public void <B>setDuration</B>(int&nbsp;duration)</PRE>
<DL>
<DD><p>Sets the duration of this sequence in sequence time units. The
 duration of a keyframe sequence, as used in animation playback, is
 determined by the value set here, irrespective of the time stamps
 of individual keyframes, and irrespective of which keyframes happen
 to be in the valid range at any given time.</p>

 <p>The duration D is also used when interpolating looping keyframe
 sequences. The time interval from the last valid keyframe to the
 first valid keyframe of the next cycle is calculated as follows:</p>

 <ul>
 D - (t<sub>last</sub> - t<sub>first</sub>)
 </ul>

 <p>where t<sub>first</sub> and t<sub>last</sub> are the time
 stamps of the first and last keyframe, respectively, in the
 valid range (see <code>setValidRange</code>). Note that they
 are not necessarily the first and last keyframe of the whole
 sequence.</p>

 <p>The duration of the sequence must not be less than the
 time stamp of the last valid keyframe (t<sub>last</sub>),
 as otherwise the above formula would yield a negative time
 interval. Since the duration and the valid range can both be
 changed at any time, this condition is only enforced by the
 <code>animate</code> method in Object3D.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>duration</CODE> - duration of the valid range of the sequence
<DT><B>Throws:</B>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if <code>duration &lt;= 0</code><DT><B>See Also:</B><DD><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#getDuration()"><CODE>getDuration</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="getDuration()"><!-- --></A><H3>
getDuration</H3>
<PRE>
public int <B>getDuration</B>()</PRE>
<DL>
<DD><p>Gets the duration of this sequence.</p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the duration of this sequence in sequence time units<DT><B>See Also:</B><DD><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#setDuration(int)"><CODE>setDuration</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="setRepeatMode(int)"><!-- --></A><H3>
setRepeatMode</H3>
<PRE>
public void <B>setRepeatMode</B>(int&nbsp;mode)</PRE>
<DL>
<DD><p>Sets the repeat mode of this KeyframeSequence. There are two
 alternatives, <code>LOOP</code> and <code>CONSTANT</code>.</p>

 <p>A looping sequence always loops back to the beginning from the
 end and has an interpolated segment from the last valid keyframe
 to the first.</p>

 <p>A constant sequence maintains the first valid keyframe value
 from the beginning of the sequence to the actual time of that
 keyframe, and the last valid keyframe value from that keyframe
 to the end time of the sequence and beyond.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>mode</CODE> - the repeat mode to set
<DT><B>Throws:</B>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if <code>mode</code> is not
         one of <code>CONSTANT, LOOP</code><DT><B>See Also:</B><DD><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#getRepeatMode()"><CODE>getRepeatMode</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="getRepeatMode()"><!-- --></A><H3>
getRepeatMode</H3>
<PRE>
public int <B>getRepeatMode</B>()</PRE>
<DL>
<DD><p>Retrieves the current repeat mode of this KeyframeSequence.</p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the current repeat mode; <code>CONSTANT</code> or
         <code>LOOP</code><DT><B>See Also:</B><DD><A HREF="../../../javax/microedition/m3g/KeyframeSequence.html#setRepeatMode(int)"><CODE>setRepeatMode</CODE></A></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/KeyframeSequence.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
<EM><B>M3G 1.1 -- Jun 22, 2005</B></EM></EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../javax/microedition/m3g/IndexBuffer.html" title="class in javax.microedition.m3g"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../javax/microedition/m3g/Light.html" title="class in javax.microedition.m3g"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="KeyframeSequence.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
<EM>Copyright &copy; 2005 Nokia Corporation. See the <a href="../../../overview-summary.html#Copyright">Copyright Notice</a> for details.</EM>
</BODY>
</HTML>
