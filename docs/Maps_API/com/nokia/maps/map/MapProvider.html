<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_04) on Wed Jun 19 14:40:01 CEST 2013 -->
<title>MapProvider</title>
<meta name="date" content="2013-06-19">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="MapProvider";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/nokia/maps/map/MapPolyline.html" title="interface in com.nokia.maps.map"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../com/nokia/maps/map/MapRectangle.html" title="interface in com.nokia.maps.map"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/nokia/maps/map/MapProvider.html" target="_top">Frames</a></li>
<li><a href="MapProvider.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.nokia.maps.map</div>
<h2 title="Class MapProvider" class="title">Class MapProvider</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.nokia.maps.map.MapProvider</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../com/nokia/maps/map/MapUrlProvider.html" title="class in com.nokia.maps.map">MapUrlProvider</a></dd>
</dl>
<hr>
<br>
<pre>public abstract class <span class="strong">MapProvider</span>
extends java.lang.Object</pre>
<div class="block">This class offers an abstract base class used to identify a provider for layered map
 information. Map providers are divided into those providing data for a base
 map and those providing data for a transparent overlay layer that can be added
 on top of the base map (e.g. traffic overlay). <p>Example Overlaying the
 (opaque) basemap tiles with (transparent) traffic tiles:</p> <p><img
 src="mapprovider.png" width="800px" /></p> <p>Overlays should be provided
 in the form of tiles. Each tile has a unique index parameters [zoom,col,row].
 <p>To provide the custom overlay a method <a href="../../../../com/nokia/maps/map/MapProvider.html#get(int, int, int)"><code>get(int zoom, int column, int row)</code></a>
 has to be implemented and it should return an image of the requested tile.</p>
 <p>The indexing parameters [zoom,column,row] are a function of the geo
 location of the tile. The foundation of this mapping is the Mercator
 projection. It allows a point on a sphere (<code>&#955;</code>, <code>&#966;</code>) described by
 latitude and longitude to be mapped to a point on a plane (x,y) using the
 normalized Mercator projection:</p> <p>{<code>&#955;</code>, <code>&#966;</code>} -> [-1, 1] x [-1,
 1]</p> <p>x = <code>&#955;</code> / <code>&#928;</code> </p> <p>y = ln(tan( <code>&#928;</code>/4 + <code>&#966;</code>/2)) / <code>&#928;</code></p>
 <p>In addition to the projection, the map resolution is defined in the form of
 zoom levels. For example at the lowest zoom level 0 the map is 256x256 pixels.
 At each successive zoom level, the map width and height are doubled i.e. zoom
 level 1 has 512x512 pixels zoom level 2 has 1024x1024 pixels an so on.</p>
 <p>Since at higher zoom levels it would not be efficient to handle the map as
 a single image, the map is split into tiles. All the tiles have the same size
 and they form a table with rows and columns. The number of tiles between two
 zoom levels is always doubled. The relationship of tiles between two
 consecutive zoom levels is illustrated in the following picture:</p> <p><img
 src="mapping.gif" /></p> <p></p>

 Please have a look on the following code to see an example how to calculate
 the tile index for a particular geo location in application. <pre>
 <code><br/>
 public void calculatePosition(int latitude, int longitude, int zoom) {
         int p= Math.pow(2, zoom); double x= longitude /Math.PI; x=(x+1)/2;
         double y= latitude/Math.PI; y = (log(tan(pi/4.0+latitude/2.0))+1)/2; y = 1 - y;
         int column=(int) x*p; int row=(int)y*p;
         System.out.println("[zoom,col,row] = " + zoom + "," + col+ "," + row);
 }</code>
 </pre></div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../com/nokia/maps/map/MapUrlProvider.html" title="class in com.nokia.maps.map"><code>MapUrlProvider</code></a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../com/nokia/maps/map/MapProvider.html#MapProvider(int, long)">MapProvider</a></strong>(int&nbsp;resolution,
           long&nbsp;validity)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>abstract javax.microedition.lcdui.Image</code></td>
<td class="colLast"><code><strong><a href="../../../../com/nokia/maps/map/MapProvider.html#decode(byte[])">decode</a></strong>(byte[]&nbsp;data)</code>
<div class="block">This method is used to convert data that has been provided by the provider (via the <a href="../../../../com/nokia/maps/map/MapProvider.html#get(int, int, int)"><code>get()</code></a> method) into an ARGG integer array.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>abstract byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../com/nokia/maps/map/MapProvider.html#get(int, int, int)">get</a></strong>(int&nbsp;zoom,
   int&nbsp;column,
   int&nbsp;row)</code>
<div class="block">This method retrieves tile image data for the specified zoom, column and row.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>abstract java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../com/nokia/maps/map/MapProvider.html#getName()">getName</a></strong>()</code>
<div class="block">This method retrieves the name of the map provider.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/nokia/maps/map/MapProvider.html#getResolution()">getResolution</a></strong>()</code>
<div class="block">This method retrieves the resolution for the map tiles.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/nokia/maps/map/MapProvider.html#getValidityPeriod()">getValidityPeriod</a></strong>()</code>
<div class="block">This method retrieves the period for which tiles obtained from this provider are valid measured in milliseconds.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>abstract boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../com/nokia/maps/map/MapProvider.html#isTileSupported(int, int, int)">isTileSupported</a></strong>(int&nbsp;zoom,
               int&nbsp;column,
               int&nbsp;row)</code>
<div class="block">This method retrieves a boolean value indicating whether a map provider supports a given tile, which is zoom and position dependant.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="MapProvider(int, long)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MapProvider</h4>
<pre>public&nbsp;MapProvider(int&nbsp;resolution,
           long&nbsp;validity)</pre>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>resolution</code> - the request resolution of the tiles provided by this provider. either 128 or 256.</dd><dd><code>validity</code> - the maximum length of time (in milliseconds) the data from this map provider is to be cached.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getName()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getName</h4>
<pre>public abstract&nbsp;java.lang.String&nbsp;getName()</pre>
<div class="block">This method retrieves the name of the map provider.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The name of the provider</dd></dl>
</li>
</ul>
<a name="isTileSupported(int, int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isTileSupported</h4>
<pre>public abstract&nbsp;boolean&nbsp;isTileSupported(int&nbsp;zoom,
                      int&nbsp;column,
                      int&nbsp;row)</pre>
<div class="block">This method retrieves a boolean value indicating whether a map provider supports a given tile, which is zoom and position dependant.
 For instance, if a provider used as an overlay only supports certain zoom levels, returning
 <code>false</code> for the unsupported levels stops an attempt being made on getting the tile.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>zoom</code> - zoom level of requested tile image <p>A map provider should deliver map tiles at different discrete zoom levels. The zoom levels depend on the map and the range is obtained from <a href="../../../../com/nokia/maps/map/MapDisplay.html#getMinZoomLevel()"><code>MapDisplay.getMinZoomLevel()</code></a> and <a href="../../../../com/nokia/maps/map/MapDisplay.html#getMaxZoomLevel()"><code>MapDisplay.getMaxZoomLevel()</code></a>. At zoom level 0, the whole world is displayed in a single tile. At each subsequent zoom level, each tile gets split into 4 tiles. So, at zoom level 1, the world is split into 4 tiles, and at zoom level 2, 16 tiles, and so on. This means that the map scale depends on the zoom level and the tile resolution. For example, at zoom level 5 one pixel of a 128x128 pixel tile corresponds to 9.7715 km.</p></dd><dd><code>column</code> - column number of requested tile image <p>The number of tiles per column is a function of the zoom level: number of columns=pow(2,zoomLevel). The value can be any number between 0 and number of columns-1, both inclusive.</p></dd><dd><code>row</code> - row number of requested tile image <p>The number of tiles per row is a function of the zoom level: number of rows=pow(2,zoomLevel). The value can be any number between 0 and number of rows-1, both inclusive.</p></dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if tile is supported by provider, <code>false</code> otherwise.</dd></dl>
</li>
</ul>
<a name="get(int, int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get</h4>
<pre>public abstract&nbsp;byte[]&nbsp;get(int&nbsp;zoom,
         int&nbsp;column,
         int&nbsp;row)
                    throws java.io.IOException,
                           java.lang.InterruptedException</pre>
<div class="block">This method retrieves tile image data for the specified zoom, column and row.
 This is platform specific interface for map providers to handle overlays.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>zoom</code> - zoom level of requested tile image <p>A map provider should deliver
 map tiles at different discrete zoom levels. The zoom levels depend on the map
 and the range is obtained from <a href="../../../../com/nokia/maps/map/MapDisplay.html#getMinZoomLevel()"><code>MapDisplay.getMinZoomLevel()</code></a> and
 <a href="../../../../com/nokia/maps/map/MapDisplay.html#getMaxZoomLevel()"><code>MapDisplay.getMaxZoomLevel()</code></a>. At zoom level 0, the whole world is displayed
 in a single tile. At each subsequent zoom level, each tile gets split into 4 tiles.
 So, at zoom level 1, the world is split into 4 tiles, and at zoom level 2, 16 tiles,
 and so on. This means that the map scale depends on the zoom level and the tile resolution.
 For example, at zoom level 5 one pixel of a 128x128 pixel tile corresponds to 9.7715 km.</p></dd><dd><code>column</code> - column number of requested tile image <p>The number of tiles per column is a
 function of the zoom level: number of columns=pow(2,zoomLevel).
 The value can be any number between 0 and number of columns-1, both inclusive.</p></dd><dd><code>row</code> - row number of requested tile image <p>The number of tiles per row is a
 function of the zoom level: number of rows=pow(2,zoomLevel).
 The value can be any number between 0 and number of rows-1, both inclusive.</p></dd>
<dt><span class="strong">Returns:</span></dt><dd>A byte array representing the stream data that is passed to
 <a href="../../../../com/nokia/maps/map/MapProvider.html#decode(byte[])"><code>decode(byte[])</code></a> in order to obtain an Image.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>InterruptedException,</code> - if an IO operation is canceled.
 The data is assumed to be invalid and is ignored.</dd>
<dd><code>IOException,</code> - if a fatal non recoverable error occurs. This error is a non-recoverable
 error and all MapProviders cease should any one MapProvider throw an IOException.</dd>
<dd><code>java.io.IOException</code></dd>
<dd><code>java.lang.InterruptedException</code></dd></dl>
</li>
</ul>
<a name="decode(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>decode</h4>
<pre>public abstract&nbsp;javax.microedition.lcdui.Image&nbsp;decode(byte[]&nbsp;data)</pre>
<div class="block">This method is used to convert data that has been provided by the provider (via the <a href="../../../../com/nokia/maps/map/MapProvider.html#get(int, int, int)"><code>get()</code></a> method) into an ARGG integer array.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>data</code> - an array of provider specific data. Usually obtained from the <a href="../../../../com/nokia/maps/map/MapProvider.html#get(int, int, int)"><code>get()</code></a> method, but may have been stored in a cache.</dd>
<dt><span class="strong">Returns:</span></dt><dd>An Image from the decoded data, returned from the <a href="../../../../com/nokia/maps/map/MapProvider.html#get(int, int, int)"><code>get()</code></a> method)</dd></dl>
</li>
</ul>
<a name="getValidityPeriod()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getValidityPeriod</h4>
<pre>public final&nbsp;long&nbsp;getValidityPeriod()</pre>
<div class="block">This method retrieves the period for which tiles obtained from this provider are valid measured in milliseconds.
 This is primarily used by the tile caching mechanism. The cache keeps data that is obtained from the <a href="../../../../com/nokia/maps/map/MapProvider.html#get(int, int, int)"><code>get()</code></a> method.
 The data's age is determined from the time when the <a href="../../../../com/nokia/maps/map/MapProvider.html#get(int, int, int)"><code>get() </code></a> method was called.
 Ordinarily the <a href="../../../../com/nokia/maps/map/MapProvider.html#get(int, int, int)"><code>get()</code></a> method is not called if the cached data is less than the value
 returned.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The number of milliseconds for which tiles remain valid.</dd></dl>
</li>
</ul>
<a name="getResolution()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getResolution</h4>
<pre>public final&nbsp;int&nbsp;getResolution()</pre>
<div class="block">This method retrieves the resolution for the map tiles.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The resolution for the map tiles.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/nokia/maps/map/MapPolyline.html" title="interface in com.nokia.maps.map"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../com/nokia/maps/map/MapRectangle.html" title="interface in com.nokia.maps.map"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/nokia/maps/map/MapProvider.html" target="_top">Frames</a></li>
<li><a href="MapProvider.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
