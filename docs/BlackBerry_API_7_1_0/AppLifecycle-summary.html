<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Frameset//EN""http://www.w3.org/TR/REC-html40/frameset.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc on Mon Jul 28 14:36:56 EDT 2008 -->
<TITLE>
BlackBerry Java SDK 7.0 API Reference: Applicaiton Lifecycle
</TITLE>
<LINK REL ="stylesheet" TYPE="text/css" HREF="stylesheet.css" TITLE="Style">

<script type="text/javascript">
<!--
// switchMenu - Expand or collapse a code sample div. Takes two arguments:
// divSample, the id of the div to expand, divList
function switchMenu(divSample, sourceLink) {
	var el = document.getElementById(divSample).style;
	if (el.display == 'none') {
		el.display = 'block';
		sourceLink.className = 'explink_minus';
	} else {
		el.display = 'none';
		sourceLink.className = 'explink_plus';
	}
}

// collapseAll - Collapses all expandable divs and adds the + graphic automatically when the page loads.
// This is done so that users who do not have JS enabled can still see the code samples.
function collapseAll() {
	// Collapse all expandable divs
	var divsOnPage = document.getElementsByTagName('div');
	for (var x = 0; x < divsOnPage.length; x++) {
		if (divsOnPage[x].id.substr(0,3) == "AL_") {
			divsOnPage[x].style.display = 'none';
		}
	}

	// Change all the expand/collapse links to hlink_plus, to show a plus sign beside it
	var linksOnPage = document.getElementsByTagName('a');
	for (var y = 0; y < linksOnPage.length; y++) {
		if (linksOnPage[y].className == "explink") {
			linksOnPage[y].className = "explink_plus";
		}
	}
}
//-->
</script>
</HEAD>
<BODY BGCOLOR="white" onLoad="collapseAll();">

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_top"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Package</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="overview-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE></TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM></TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="AppLifecycle-summary.html" TARGET="_top"><B>NO FRAMES</B></A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->
<HR>
<FORM action="https://www.blackberry.com/DocsFeedback/" method="GET" target="_new">
<INPUT type="hidden" name="title" value="API Reference">
<INPUT type="hidden" name="source" value="External">

<INPUT type="hidden" name="version" value="7.0.0">
<INPUT type="hidden" name="classname" value="Applicaiton Lifecycle overview">
<INPUT type="submit" value="Submit Feedback" /></FORM>

<BR>

<!-- =========== START OF BODY =========== -->

<body>
<h1 align="center">Application Life Cycle</h1>
<p align="left" class="body">
This overview describes the lifecycle of a BlackBerry&reg; application. The lifecycle of an application refers to the possible states 
and transitions that an application can move through from the time it starts until it terminates.
</p>
<p>
BlackBerry devices support Java&reg; ME compliant applications called MIDlets. MIDlets have a different application 
lifecycle that this overview will not cover. There are many web resources available that cover the MIDlet lifecycle. 
</p>
<p>
The lifecycle of a BlackBerry application is simple. It starts, runs and terminates. During the running state, most 
applications receive and process events and update their UI accordingly.
</p>
<p>
The BlackBerry operating environment is multi-threaded. It enables you to run multiple applications simultaneously. 
It supports broadcasting events to multiple applications and running background threads.
</p>


<h2>BlackBerry Applications</h2>
<p>
It helps to understand how BlackBerry applications are structured and managed to understand their lifecycle. 
Applications are comprised of one or more code modules. Code modules are stored in files with the .cod file 
extension. Although an application can have just a single code module, many applications are implemented in a group 
of code modules. Code modules groups can have associated application metadata like vendor name and application 
version number.
</p>
<p>
You can work with individual code modules by using the <a href="net/rim/device/api/system/CodeModuleManager.html">CodeModuleManager</a> class. 
To work with code module groups, use <a href="net/rim/device/api/system/CodeModuleGroup.html">CodeModuleGroup</a> and 
<a href="net/rim/device/api/system/CodeModuleGroupManager.html">CodeModuleGroupManager</a>.
</p>
<p>
All applications have an application class derived from either <a href="net/rim/device/api/system/Application.html">Application</a>
 or <a href="net/rim/device/api/ui/UiApplication.html">UiApplication</a>. If you want an 
application with a UI, then your application should extend <code>UiApplication</code>. Otherwise, your application should extend 
<code>Application</code>.
</p>

<h3>Starting</h3>
<p>
A BlackBerry application can be started in a number of ways:
<ul>
<li>by a user clicking an icon on the home screen</li>
<li>by the system automatically on device startup</li>
<li>by another application</li>
<li>by the system at a scheduled time</li>
</ul>
</p>
<p>
Regardless of how an application is started, the Application Manager is responsible for starting the process the 
application will run within. 
</p>
<p>
The <a href="net/rim/device/api/system/ApplicationManager.html">ApplicationManager</a> class enables applications to interact 
with the Application Manager to perform tasks, including:
<ul>
<li>run an application immediately or at a scheduled time</li>
<li>interact with processes, including retrieving the IDs for foreground applications</li>
<li>post global events to the system</li>
</ul>
</p>

<p>
<b>Entry points</b>
</p>
<p>
The Application Manager starts an application by getting a new process and spawning a thread within that process to 
call one of the entry points of the application. For many applications, the <code>main()</code> method of its application class 
is the single entry point that is called. But you can configure more than one entry point for an application.
</p>
<p>
Using more than one entry point lets you create different ways for a user to start an application. For example, if 
your application allows users to create a new document, you might like to provide users with two icons that they can 
click to start the application. Users could click one icon to open the application to its home screen and the other icon
to open the application to the screen required to create a new document.
</p>

<p>
<b>Application descriptors</b>
</p>
<p>
Application descriptors are sets of data about an application. A single application can have more than one 
associated application descriptor. An application that has multiple entry points, for example, has an 
application descriptor corresponding to each of those entry points. You can use the 
<a href="net/rim/device/api/system/ApplicationDescriptor.html">ApplicationDescriptor</a> class to 
work with application descriptors.
</p>

<p><a class="explink" onClick="switchMenu('AL_1', this);">Click for code sample: List properties of applications</a></p>
<div id="AL_1">
<table class="codesample">
  <tr>
    <td>
    <pre>
import net.rim.device.api.system.ApplicationDescriptor;
import net.rim.device.api.system.ApplicationManager;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.LabelField;
import net.rim.device.api.ui.component.RichTextField;
import net.rim.device.api.ui.container.MainScreen;


public class ListApplications extends UiApplication 
{
	StringBuffer strTmp = new StringBuffer();
	public static void main(String[] Args)
	{
		ListApplications app = new ListApplications();
		app.enterEventDispatcher();
	}
	public ListApplications()
	{
		ApplicationManager appMgr = ApplicationManager.getApplicationManager();
		ApplicationDescriptor[] ad = appMgr.getVisibleApplications();
		
		for(int i=0;i&lt;ad.length;i++)
		{
			strTmp.append("Name: ");
			strTmp.append(ad[i].getName());
			strTmp.append('\n');
			strTmp.append("Module Name: ");
			strTmp.append(ad[i].getModuleName());
			strTmp.append('\n');
			strTmp.append("Version: ");
			strTmp.append(ad[i].getVersion());
			strTmp.append('\n');
			strTmp.append('\n');
		}
		this.pushScreen(new InfoScreen(strTmp.toString()));
	}
}

class InfoScreen extends MainScreen
{
	public InfoScreen(String strMsg)
	{
		RichTextField lf = new RichTextField(strMsg);
		add(lf);
	}
}</pre>
  </td>
</tr>
</table>
</div>


<h3>Running</h3>
<p>
Once the Application Manager starts an application, the application can either run a series of commands until it 
completes or it can enter a loop and wait for and process events until it receives an event that indicates it 
should terminate.
</p>

<p>
Each application has, associated with it, a special thread called the event thread. The event thread is the thread 
that has the event lock. It is the only thread that can process incoming events and it is the only thread that can 
update the UI of its associated application.
</p>
<p>
Typically, an application calls <code>Application.enterEventDispatcher()</code> somewhere near the beginning of its <code>main()</code> 
function. The result is that the thread that started the application by entering <code>main()</code>, acquires the event lock, 
becoming the event thread. 
</p>
<p>
<table class="codesample">
  <tr>
    <td><code><pre>
public class MyApplication extends Application
{
    // Entry point for the app
    public static void main(String[] args)
    {
         MyApplication thisApp = new MyApplication();
         thisApp.enterEventDispatcher();
    }
 
    /** Create a new MyApplication instance. */
    public MyApplication()
    {
        // ... Application's start-up work done here when
        // ... entry point instantiates this class.
    }
}
</pre></code>
</td>
</tr>
</table>
</p>
<p>
From that point onwards, the application is in an event processing loop. Any listeners you write and register - or 
are provided for you by the application framework - are called by the event thread in response to corresponding 
incoming messages.
</p>

<p>
<table style="background-color:#C0C0C0">
<tr><td style="background-color:#EDF0F4">
<b>Warning:</b> Because the event thread is the only thread that can process events and update the UI of the application, 
you have to be extremely careful not to use it to run instructions that could fail or take a long time to complete. If, 
for instance, you need to make a network connection, you must spawn and use another thread.
</td></tr>
</table>
</p>

<p>
To practice working with threads and updating the UI, see the 
<a href="http://na.blackberry.com/eng/developers/resources/developer_labs.jsp#tab_tab_jde" target="_new">
Working with Multiple Processes and Threads</a> section of the developer labs available on the 
<a href="http://www.blackberry.com/developers">BlackBerry&reg; Developer Zone</a>.
</p>

<p>
You may encounter situations where you want to update the UI from a non-event thread. There are two ways you
can do that. You can acquire and synchronize on the event lock, causing your thread to act like the event thread or 
you can inject a event in the message queue of your application. 
</p>

<p>
Synchronize on the event lock if you need to perform a quick or urgent UI update. Inject an event in the message queue if 
it is acceptable to experience a delay before your task runs. In either case, you should not run tasks that might take a long
time to complete or might block. If you use library calls within your task, be sure you understand them well and only use them
if they will finish quickly and do not block.
</p>

<p>You inject an event in the form of an object that implements <a href="java/lang/Runnable.html">Runnable</a>. The event is
handled by the event thread as it is received from the message queue. The event thread processes the event by calling its
<a href="java/lang/Runnable.html#run()">run()</a> method. 
</p>
<p>
To inject runnable events in the message queue of your application, use one of the following methods: <a href="net/rim/device/api/system/Application.html#invokeAndWait(java.lang.Runnable)">invokeAndWait()</a>
or <a href="net/rim/device/api/system/Application.html#invokeLater(java.lang.Runnable)">invokeLater()</a>.
</p>
<p>
If you decide to synchronize on the event lock, you must quickly complete the UI update you require and release the lock.
Otherwise, your application will become unresponsive and might eventually be terminated by the system. You acquire the event
lock by calling <a href="net/rim/device/api/system/Application.html#getEventLock()">Application.getEventLock()</a>.
</p>




<h3>Terminating</h3>
<p>
You can invoke <code>System.exit()</code> to terminate an application. This causes the BlackBerry&reg; Java Virtual Machine to terminate all of the
processes of the caller and, as a result, all associated threads. Alternatively,
you can terminate an application by popping the last screen off the display stack, which results in the <code>close()</code> method 
making a call to <code>System.exit()</code>.
</p>
<p>
<table style="background-color:#C0C0C0">
<tr><td style="background-color:#EDF0F4">
<b>Note:</b> that it is good practice to manually deregister any listeners you registered before terminating your application.
</td></tr>
</table>
</p>
<p>
Because you will typically start the event dispatcher thread by calling <a href="net/rim/device/api/system/Application.html#enterEventDispatcher()">
Application.enterEventDispatcher()</a>, which doesn't terminate, your application should provide a way to
terminate. Applications that interact with the user could provide a handler for a Close menu item and applications that do not
interact with the user might terminate upon handling some system event that represents their reason for existence.
</p>


<HR>
<div id="legalnotice">
<table cellspacing="0" cellpading="0" width="100%" style="border:none;">
<tr>
<td style="border:none;">
<font size=-1>
<P>Copyright 1999-2011 Research In Motion Limited. 295 Phillip Street, Waterloo, Ontario, Canada, N2L 3W8. All Rights Reserved.<br>
Java is a trademark of Oracle America, Inc. in the US and other countries.</p>
</font>
</td>
<td style="text-align:right; border:none;">
<font size=-1><br>
<a href="http://www.blackberry.com/legal" target="_blank">Legal</a>
</font>
</td>
</tr>
</table>
</div>
</BODY>
</HTML>
