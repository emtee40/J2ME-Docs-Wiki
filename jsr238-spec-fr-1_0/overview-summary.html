<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.4.2_04) on Mon Apr 04 13:48:37 EEST 2005 -->
<TITLE>
Overview (Mobile Internationalization API (JSR-238))
</TITLE>

<META NAME="keywords" CONTENT="Overview, JSR-238">

<LINK REL ="stylesheet" TYPE="text/css" HREF="stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="Overview (Mobile Internationalization API (JSR-238))";
}
</SCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Overview</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Package</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="javax/microedition/global/package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="overview-summary.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<CENTER>
<H1>
JSR-238
</H1>
</CENTER>
<html>
         <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   
            <title>Mobile Internationalization API (JSR-238)</title>
         </head>
         <body>
            Mobile Internationalization API.
<P>
<B>See:</B>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="#overview_description"><B>Description</B></A>
<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Packages</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="20%"><B><A HREF="javax/microedition/global/package-summary.html">javax.microedition.global</A></B></TD>
<TD>Contains classes that implement the JSR-238, "Mobile Internationalization
API".</TD>
</TR>
</TABLE>

<P>
&nbsp;<A NAME="overview_description"><!-- --></A>
<P>
<html>
         <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   
            <title>Mobile Internationalization API (JSR-238)</title>
         </head>
         <body>
            <h2>Mobile Internationalization API.</h2>
            <p>This document defines JSR-238, 
               the Mobile Internationalization API, 
               version 1.0.
            </p>
            <p>Author: JSR-238 Expert Group (e-mail: 
               <a href="mailto:jsr-238-comments@jcp.org">jsr-238-comments@jcp.org</a>)
            </p>
            <p>Status: Final Specification</p>
            <p>Released: 2005-02-15</p>
            <p>Copyright &copy; 2004-2005&nbsp;Nokia Corporation. All rights reserved.</p>
            <table border="1">
               <caption>Revision history</caption>
               <thead>
                  <tr>
                     <th>Version</th>
                     <th>Published</th>
                     <th>Description</th>
                  </tr>
               </thead>
               <tbody>
                  <tr>
                     <td>0.1</td>
                     <td>2004-04-20</td>
                     <td>API proposal, revision 1</td>
                  </tr>
                  <tr>
                     <td>0.2</td>
                     <td>2004-05-04</td>
                     <td>First EG internal Community Review Draft</td>
                  </tr>
                  <tr>
                     <td>0.3</td>
                     <td>2004-05-24</td>
                     <td>Second EG internal Early Draft</td>
                  </tr>
                  <tr>
                     <td>0.4</td>
                     <td>2004-06-02</td>
                     <td>Submitted to JCP Early Draft Review with updated license</td>
                  </tr>
                  <tr>
                     <td>0.5</td>
                     <td>2004-08-25</td>
                     <td>First EG internal Public Draft</td>
                  </tr>
                  <tr>
                     <td>0.6</td>
                     <td>2004-10-04</td>
                     <td>Second EG internal Public Draft</td>
                  </tr>
                  <tr>
                     <td>0.7</td>
                     <td>2004-10-15</td>
                     <td>Public Review Draft</td>
                  </tr>
                  <tr>
                     <td>0.8</td>
                     <td>2004-11-29</td>
                     <td>Proposed Final Draft Candidate 1</td>
                  </tr>
                  <tr>
                     <td>0.9</td>
                     <td>2004-12-08</td>
                     <td>Proposed Final Draft Candidate 2</td>
                  </tr>
                  <tr>
                     <td>0.9.1</td>
                     <td>2004-12-14</td>
                     <td>Proposed Final Draft</td>
                  </tr>
                  <tr>
                     <td>0.9.4</td>
                     <td>2005-02-02</td>
                     <td>Final Specification, Release Candidate 1</td>
                  </tr>
                  <tr>
                     <td>0.9.5</td>
                     <td>2005-02-11</td>
                     <td>Final Specification, Release Candidate 2</td>
                  </tr>
                  <tr>
                     <td>1.0</td>
                     <td>2005-02-15</td>
                     <td>Final Specification</td>
                  </tr>
               </tbody>
            </table>
            
<h3>RESEARCH AND EVALUATION LICENSE</h3>

<p><strong>NOKIA CORPORATION IS WILLING TO LICENSE THIS 
SPECIFICATION TO YOU ONLY UPON THE TERMS CONTAINED IN THIS LICENSE 
("LICENSE"). PLEASE READ THE TERMS AND CONDITIONS OF THIS LICENSE 
CAREFULLY. BY ACCESSING OR USING THE SPECIFICATION YOU WILL BE BOUND BY 
THE TERMS OF THIS LICENSE.</strong></p>
        
<p><strong>JSR-238 Mobile Internationalization API Specification ("Specification")</strong></p>
<p><strong>Specification Lead: Nokia Corporation ("Specification Lead")</strong></p>

<p><strong>1. NOTICE; LIMITED LICENSE GRANTS</strong></p>

<p>1.1 The Specification Lead hereby grants You a non-exclusive, 
non-transferable, worldwide, royalty-free, fully paid-up, limited license 
(without the right to sublicense) solely under intellectual property rights 
licensable by the Specification Lead to analyze and to use the Specification 
for research, evaluation, optimization and development purposes. In addition 
You may make a reasonable number of verbatim copies of this Specification in 
its entirety for Your private or internal use, as applicable, in accordance 
with the terms and conditions of this License.</p>

<p>1.2 No rights are granted under this License for internal deployment, 
the creation and/or distribution of implementations of the Specification 
for direct or indirect (including strategic) gain or advantage, the 
modification of the Specification (other than to the extent of Your fair 
use rights) or the distribution of the Specification or making the 
Specification available for 3rd parties.</p>

<p>1.3 Except as expressly set forth in this license, You acquire no right, 
title or interest in or to Specification or any other intellectual property 
licensable by the Specification Lead and no other rights are granted by 
implication, estoppel or otherwise. The Specification may only be used in 
accordance with the license terms set forth herein. This License will terminate 
immediately without notice from Specification Lead if You fail to comply with 
any provision of this License.</p>


<p><strong>2. TRADEMARKS</strong></p>

<p>2.1 Nokia is a registered trademark of Nokia Corporation. 
Nokia Corporation's product names are either trademarks or registered 
trademarks of Nokia Corporation. Your access to this Specification should not 
be construed as granting, by implication, estoppel or otherwise, any license 
or right to use any marks appearing in the Specification without the prior 
written consent of Nokia Corporation or Nokia's licensors. No right, title, 
or interest in or to any trademarks, service marks, or trade names of any 
third parties, is granted hereunder.</p>

<p>2.2 You shall not be allowed to remove any of the copyright statements 
or disclaimers or other proprietary notices contained in the Specification 
and You are obliged to include the copyright statement and the disclaimers, 
if any, in any copies of the Specification You make.</p>


<p><strong>3. DISCLAIMER OF WARRANTIES</strong></p>

<p>3.1 SUBJECT TO ANY STATUTORY WARRANTIES OR CONDITIONS WHICH CAN NOT BE 
EXCLUDED, THE SPECIFICATION IS PROVIDED "AS IS" WITHOUT WARRANTY OR CONDITION 
OF ANY KIND EITHER EXPRESS, IMPLIED, OR STATUTORY, INCLUDING, BUT NOT LIMITED 
TO, ANY IMPLIED WARRANTIES OR CONDITIONS OF MERCHANTABILITY, FITNESS FOR A 
PARTICULAR PURPOSE AND NON-INFRINGEMENT. ALL WARRANTIES AND CONDITIONS, 
EXPRESS, IMPLIED, AND STATUTORY ARE HEREBY DISCLAIMED. THE ENTIRE RISK 
ARISING OUT OF OR RELATING TO THE USE OR PERFORMANCE OF THE SPECIFICATION 
REMAINS WITH YOU.</p>

<p>3.2 THE SPECIFICATION MAY INCLUDE TECHNICAL INACCURACIES OR TYPOGRAPHICAL 
ERRORS. CHANGES ARE PERIODICALLY ADDED TO THE INFORMATION THEREIN; THESE 
CHANGES WILL BE INCORPORATED INTO NEW VERSIONS OF THE SPECIFICATION, IF ANY. 
SPECIFICATION LEAD MAY MAKE IMPROVEMENTS AND/OR CHANGES TO THE PRODUCT(S) 
AND/OR THE PROGRAM(S) DESCRIBED IN THE SPECIFICATION AT ANY TIME. Any use of 
such changes in the Specification will be governed by the then-current license 
for the applicable version of the Specification.</p>


<p><strong>4. LIMITATION OF LIABILITY</strong></p>

<p>4.1 TO THE FULLEST EXTENT PERMITTED BY LAW, IN NO EVENT WILL THE 
SPECIFICATION LEAD OR ITS SUPPLIERS BE LIABLE FOR ANY LOST PROFITS, LOST 
SAVINGS, LOST REVENUE, LOST DATA, PROCUREMENT OF SUBSTITUE GOODS, OR FOR ANY 
DIRECT, INDIRECT, INCIDENTIAL, SPECIAL, PUNITIVE, OR CONSEQUENTIAL DAMAGES, 
EVEN IF THE SPECIFICATION LEAD OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE 
POSSIBILITY OF SUCH LOSSES OR DAMAGES. IN ADDITION THE SPECIFICATION LEAD AND 
ITS SUPPLIERS WILL NOT BE LIABLE FOR ANY DAMAGES CLAIMED BY YOU BASED ON ANY 
THIRD PARTY CLAIM.</p>

<p>4.2 Some jurisdictions do not allow the exclusion of implied warranties, 
or the limitation for consequential damages, so Section 4.1 may not apply to 
You in whole, but in such case Section 4.1 will apply to You to the maximum 
extent permitted by applicable law.</p>


<p><strong>5. EXPORT CONTROL</strong></p>

<p>5.1 You shall follow all export control laws and regulations relating to 
Specification.</p>


<p><strong>6. RESTRICTED RIGHTS LEGEND</strong></p>

<p>6.1 Note to U.S. Government Users. The Specification is a "Commercial 
Items", as that term is defined at 48 C.F.R. 2. 101, consisting of 
"Commercial Computer Software" and "Commercial Computer Software 
Documentation", as such terms are used in 48 C.F.R. 12.212 or 48 C.F.R. 
227.7202, as applicable. Consistent with 48 C.F.R. 12.212 or 48 C.F.R. 
227.7202-1 through 227.7202-4, as applicable, the Commercial Computer 
Software Documentation are being licensed to U.S. Government end users 
a) only as Commercial Items and b) with only those rights as are granted 
to all other end users pursuant to the terms and conditions herein. 
Unpublished-rights reserved under the copyright laws of the United States.</p> 

            
            <p>This specification was produced by the JSR-238 Expert Group in the 
               Java Community Process (JCP). For more information, visit the 
               <a href="http://www.jcp.org/en/jsr/detail?id=238" target="_top">JSR-238 web page</a>.
            </p>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d0e202"></a>Contributors
                        </h2>
                     </div>
                  </div>
               </div>
               <p>The Expert Group consisted of representatives from the following companies 
                  (in alphabetical order):
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>Cap Gemini</p>
                     </li>
                     <li>
                        <p>Esmertec AG</p>
                     </li>
                     <li>
                        <p>IBM Corporation</p>
                     </li>
                     <li>
                        <p>Nokia Corporation</p>
                     </li>
                     <li>
                        <p>Research In Motion, LTD (RIM)</p>
                     </li>
                     <li>
                        <p>Siemens AG</p>
                     </li>
                     <li>
                        <p>Sun Microsystems, Inc.</p>
                     </li>
                     <li>
                        <p>Symbian Ltd.</p>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d0e232"></a>Comments
                        </h2>
                     </div>
                  </div>
               </div>
               <p>Your comments about this specification are welcome. Please send them 
                  by electronic mail to the following address:
               </p><pre class="screen">&lt;jsr-238-comments@jcp.org&gt;</pre></div>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d0e239"></a>Document conventions
                        </h2>
                     </div>
                  </div>
               </div>
               <p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD
                  NOT", "RECOMMENDED", "MAY" and "OPTIONAL" in this specification are to be interpreted as described
                  in RFC 2119 (see "Related documentation").
               </p>
               <p>Monospaced type is used to denote literal text such as <code class="literal">/global</code>
                  and constants such as <code class="constant">DEVICE</code> and <code class="constant">0x7FFFFFFF</code>.
               </p>
               <p>Unicode characters are expressed in the U+NNNN notation, where NNNN denotes 
                  a 16-bit hexadecimal code point.
               </p>
            </div>
            <hr>
            <h2>Mobile Internationalization API</h2>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d0e263"></a>Introduction
                        </h2>
                     </div>
                  </div>
               </div>
               <p>This specification defines 
                  <span class="emphasis"><em>Mobile Internationalization API</em></span>, 
                  a J2ME Optional Package containing an application program interface 
                  that allows MIDP application developers to internationalize their MIDP 
                  applications. Internationalization is a prerequisite to localization, both
                  very important in multilingual software development.
               </p>
               <p>The API provides the locale-specific formatting of dates, times, numbers
                  (including percentages) and currency amounts. It is also possible to 
                  construct messages that have a variable number of ordered parameters. Furthermore, the API
                  defines a mechanism to retrieve application-specific and device-specific
                  resources, and provides services for the locale-specific collation (sorting) of strings.
                  
               </p>
               <p>Mobile Internationalization API is designed as an Optional Package, 
                  intended to be used 
                  with the Mobile Information Device Profile (MIDP) running over the Connected, 
                  Limited Device Configuration (CLDC). The implementation should also work in the 
                  Connected Device Configuration (CDC) and MAY be implemented using it. 
                  For more information, see the System requirements section.
               </p>
               <p>All classes in this API are in a single package, 
                  <code class="literal">javax.microedition.global</code>.
               </p>
            </div>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d0e280"></a>Goals
                        </h2>
                     </div>
                  </div>
               </div>
               <p>The goal of the Mobile Internationalization API is to provide
                  internationalization services to Java MIDlets running in MIDP over CLDC. 
                  While Java 2, Standard Edition provides extensive
                  support for internationalization, this support has not been included in
                  the more limited configurations and profiles of Java 2, Micro Edition. 
                  
               </p>
               <p>This API is designed to provide its services in a
                  compact and generic form. It augments the MIDP application platform by bringing
                  MIDP applications to a similar level with desktop applications in terms of
                  internationalization.
               </p>
            </div>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d0e287"></a>System requirements
                        </h2>
                     </div>
                  </div>
               </div>
               <p>The underlying configuration MUST be CLDC 1.1 or later, due to the inclusion of 
                  floating point numeric formatting. The CLDC 1.1 implementation SHOULD support the "mark and reset" functionality
                  for input streams. (See the documentation of CLDC's <code class="classname">java.io.InputStream</code> 
                  class for details.) This ensures that the binary resource files used by this API
                  can be read more efficiently. CLDC 1.1 also implies support for the characters in Unicode 3.0 or later.
               </p>
               <p>The version of MIDP used MUST be 2.0 later. 
                  That version of MIDP defines the format of the <code class="literal">microedition.locale</code> 
                  system property more accurately than version 1.0, and contains user interface components 
                  to facilitate the entry of common data items in a locale-specific manner. It also
                  requires character encoding support for UTF-8.
               </p>
               <p>If the underlying operating system provides services for Unicode collation and other related 
                  internationalization functionality, implementations of this API SHOULD take advantage of 
                  those services.
               </p>
               <p>This API is implementable in CDC. Most features can be implemented in CDC
                  by mapping the functionality to the CDC subset of the J2SE libraries.
               </p>
            </div>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d0e304"></a>Version information
                        </h2>
                     </div>
                  </div>
               </div>
               <p>Applications MUST be able to determine the version of Mobile Internationalization
                  API present in the device, if any, by querying the value of the system
                  property <code class="literal">microedition.global.version</code>. For version 1.0 of
                  the API the value returned MUST be the string <code class="constant">"1.0"</code>. If Mobile
                  Internationalization API is not present, the value
                  returned MUST be <code class="constant">null</code>.
               </p>
            </div>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d0e318"></a>Implementation notes
                        </h2>
                     </div>
                  </div>
               </div>
               <p>Some internationalization features, particularly Unicode collation,
                  can be challenging to implement in a constrained device. However, many operating
                  systems that have implementations of J2ME configurations already have some
                  required basic functionality. It is therefore advisable that implementations
                  of this API rely on this existing functionality as much as possible, and attempt
                  to map this API into native functionality.
               </p>
               <p>Implementers are also encouraged to evaluate the suitability of the data 
                  available from the Common Locale Data Repository (CLDR) Project 
                  (see "Related documentation") for their purposes
                  when implementing locale-specific formatting and Unicode collation.
               </p>
            </div>
            <hr>
            <h2>Locales</h2>
            <p>A <span class="italic">locale</span> is a combination of
               a language and a country or region. It is used in internationalization
               as a label for conventions that are typical for speakers of the
               language in the country or region.
            </p>
            <p>In the Mobile Internationalization API locales are used to distinguish
               between different resources, data formatting conventions and string comparisons. Many
               classes in the API have methods taking a locale parameter that affects the
               behaviour of the class.
            </p>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d0e335"></a>Locale identifiers
                        </h2>
                     </div>
                  </div>
               </div>
               <p>In the Mobile Internationalization API locale identifiers are simple strings. 
                  They MUST follow the format of locale identifiers found in Chapter 5 of the MIDP 2.0 specification, 
                  unless the identifier is the empty string. MIDP 2.0 locale identifiers  
                  consist of an ISO 639-1 two-letter language code, an ISO 3166-1 two-letter country code, and 
                  a variant code. If the value is non-<code class="constant">null</code>, only the language code is mandatory.
               </p>
               <p>For application resource files handled by this API, the empty string 
                  as a locale identifier has a special meaning, as discussed in the "Resource files" section.
                  When formatting data items or sorting strings using an empty locale triggers 
                  locale-neutral behaviour (see the respective class descriptions).
               </p>
               <p>For robustness and compatibility with J2SE, methods taking locale identifiers as parameters 
                  MUST accept both underscore (U+005F) and dash (U+002D). However, application programmers
                  SHOULD use only the dash.
               </p>
               <p>Note that many classes in this API use the value of the <code class="literal">microedition.locale</code>
                  system property as the default locale unless something else is specified.
                  As the MIDP specification allows this value to have the <code class="constant">null</code> value,
                  some classes revert to a locale-neutral behaviour in such situations.
               </p>
            </div>
            <hr>
            <h2>Resources</h2>
            <p>Resources are application data that is typically localized.
               When the application is run, a different resource may be loaded for the same 
               identifier, depending on the current locale setting of the runtime system
               and the organization of the application resources. Each resource has an 
               identifier that is used when loading the resource at runtime.
            </p>
            <p>Mobile Internationalization API has two different resource categories:
               <span class="emphasis"><em>application resources</em></span> and <span class="emphasis"><em>device resources</em></span>.
               The <code class="classname">ResourceManager</code> class is used to access both application resources
               and device resources. Application resources are supplied
               by the developer and shipped with the application, whereas device resources
               have already been made available by the device manufacturer.
            </p>
            <p>The set of device resources varies by manufacturer and is not in the scope of this API.
               Instead device manufacturers should define the
               appropriate public resources and their identifiers for application developers
               to use. The storage format of device
               resources is implementation-specific.
            </p>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d0e373"></a>Base names
                        </h2>
                     </div>
                  </div>
               </div>
               <p>The application programmer can group related application resources
                  together by using a <span class="emphasis"><em>base name</em></span>. In this context it is a non-empty string that is
                  used in the names of application resource files to indicate that they belong together.
                  The base name can reflect anything the application developer wants, such as
                  menu commands or messages.
               </p>
               <p>If the base name is empty, it refers to device resources. For these 
                  resources there is no application resource file, but instead the manufacturer-defined
                  resources are consulted.
               </p>
               <p>Application developers SHOULD restrict the characters used in the base names 
                  to the ASCII character set. The JAR file specification does not explicitly state
                  the character encoding used in the file names, and many utilities have problems
                  with non-ASCII characters.
               </p>
            </div>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d0e385"></a>Application resource files
                        </h2>
                     </div>
                  </div>
               </div>
               <p>Application resources MUST be stored inside the 
                  application's JAR file. They MUST be in the binary
                  resource file format defined by this specification (see the section
                  "The binary resource file format").
                  
               </p>
               <p>
                  The organization of the application resource files inside the JAR file MUST 
                  be as follows. The JAR file MUST contain a special directory named '<code class="filename">/global</code>'
                  to store the resource files. This directory MUST contain a subdirectory for
                  each supported locale. The directory names MUST be valid MIDP 2.0 locale identifiers.
               </p>
               <p> 
                  Resource files specific to some locale MUST be placed inside the corresponding
                  locale subdirectory under <code class="filename">/global</code>, whereas common resources 
                  MUST be placed in the <code class="filename">/global</code> directory. The names of the 
                  resource files MUST be of the form '<code class="filename">baseName.res</code>',
                  where <code class="literal">baseName</code> is the base name used in the <code class="classname">ResourceManager</code> constructors.
                  For example, the absolute pathname of a resource file inside the JAR might be 
                  '<code class="filename">/global/en/Menus.res</code>' or '<code class="filename">/global/fi-FI/Menus.res</code>'
                  for resources specific to locales <code class="literal">en</code> and <code class="literal">fi-FI</code>.
                  In the case of common resources the filename might be '<code class="filename">/global/Common.res</code>'.  
                  
               </p>
               <p>The following diagram illustrates this arrangement:</p><pre class="screen">JAR file root
    |
    |
    +----global----Common.res
          |
          |
          +----fi-FI----Menus.res
               |        Labels.res
               |
               en-------Menus.res
               |        Labels.res
               |
               de-DE----Menus.res
                        Labels.res</pre><p>This example contains seven resource files inside the JAR file, with absolute
                  filenames such as <code class="filename">/global/Common.res</code>,
                  <code class="filename">/global/fi-FI/Menus.res</code>, and so on.
               </p>
               <p>Often it is advantageous to collect together elements that do not change
                  from one locale to another. For example, you can save storage by placing into a
                  common resource file those resources that could <span class="emphasis"><em>change</em></span>
                  but will never be <span class="emphasis"><em>translated</em></span>.
               </p>
               <p>According to the MIDP 2.0 specification, if the <code class="literal">microedition.locale</code>
                  system property is present at all (i.e. it is non-<code class="constant">null</code>), 
                  it always contains the language part. To implement the common locale this API extends the 
                  MIDP 2.0 definition so that an empty locale identifier points  
                  to common resource files placed in the '<code class="filename">/global</code>' directory. 
                  These files MUST conform to the same naming rules as the locale-specific resources.
                  
               </p>
               <p>
                  The resource retrieval mechanism MUST also support <span class="emphasis"><em>resource inheritance</em></span>; 
                  if a resource is not found using the specified locale identifier, it is searched again with the
                  last component of the locale identifier removed, until a match is found or it is
                  determined that the resource is not found even in the common locale. 
                  For an in-depth description of the inheritance mechanism see the <code class="classname">ResourceManager</code>
                  class description.
                  
               </p>
               <p>
                  Note that the directory and file names inside the JAR are case-sensitive. 
                  
               </p>
            </div>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d0e468"></a>Enumerating supported resource locales
                        </h2>
                     </div>
                  </div>
               </div>
               <p>The <code class="classname">ResourceManager</code> class has a static method 
                  <code class="methodname">getSupportedLocales</code> to determine which locales are supported
                  for a given base name. For device resources this information MUST be provided by the
                  implementation. For application resources the application JAR file MUST contain a meta-information file 
                  for each base name, called '<code class="filename">global/_baseName</code>'. 
                  The meta-information 
                  mechanism avoids repeated lookups of resource files from inside the JAR file.
               </p>
               <p>Each meta-information file lists the supported locales for the corresponding base name. 
                  The file MUST contain the locale identifiers of
                  the locales supported for that base name, separated by one blank space (U+0020). 
                  These files SHOULD be generated along with
                  the binary resource files.
               </p>
               <p>If the contents of the meta-information file for some base name do not 
                  agree with the actual resource files inside the JAR file, the effect MUST 
                  be as follows when attempting to instantiate a <code class="classname">ResourceManager</code> for that 
                  base name and the requested locale:
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>If the meta-information file lists the locale, but no 
                           resource file for the combination of base name and locale exists, the 
                           attempt MUST throw a <code class="exceptionname">ResourceException</code> with the error code 
                           <code class="constant">NO_RESOURCES_FOR_BASE_NAME</code>.
                        </p>
                     </li>
                     <li>
                        <p>If the meta-information file does not list the locale, 
                           the attempt MUST throw an <code class="exceptionname">UnsupportedLocaleException</code>, 
                           even if a resource file for the combination of base name and locale exists.
                        </p>
                     </li>
                  </ul>
               </div>
               <p>
                  For example, if the JAR file contains application resource files for the base name <code class="literal">Menus</code>
                  for the Finnish, Hungarian and Brazilian Portuguese locales, the file <code class="filename">global/_Menus</code> would
                  contain the following:
               </p><pre class="screen">fi-FI hu-HU pt-BR</pre><p>Values in the meta-information file MAY be quoted using U+0022 QUOTATION MARK,
                  for example <code class="literal">"fi-FI"</code>. If there are common resources for the base name, the
                  file MUST include the empty string. The empty string MUST
                  be quoted and it SHOULD be the first value in the file.
               </p>
               <p>In the previous example, if the base name <code class="literal">Menus</code> had also common 
                  resources, the meta-information file <code class="filename">_Menus</code> would contain
               </p><pre class="screen">"" fi-FI hu-HU pt-BR</pre><p>This is equivalent to</p><pre class="screen">"" "fi-FI" "hu-HU" "pt-BR"</pre><p>If the meta-information file for the specified base name is not found,
                  the <code class="methodname">getSupportedLocales</code> method MUST throw a
                  <code class="exceptionname">ResourceException</code> with
                  the error code <code class="constant">METAFILE_NOT_FOUND</code>.
               </p>
            </div>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d0e545"></a>The binary resource file format
                        </h2>
                     </div>
                  </div>
               </div>
               <p>This section describes the structure of the binary resource file format
                  of Mobile Internationalization API. 
                  To be accessible using this API, resource files shipped with applications
                  MUST be in this format.
               </p>
               <p>Each resource in the resource file MUST have an associated ID,
                  with a value of between <code class="constant">0x00000000</code> and 
                  <code class="constant">0x7FFFFFFF</code> (inclusive). The resource IDs
                  MUST be unique inside one resource file. However, the same resource ID
                  can occur in other resource files with the same base name but different
                  locales. This allows resource inheritance as discussed in the 
                  <code class="classname">ResourceManager</code> class description.
               </p>
               <p>All resources are stored 
                  as byte arrays. Being the most common resources, strings
                  are a special case in the API. The string data MUST be encoded in UTF-8. 
                  Other resources are stored as raw data, and the meaning of the data is 
                  application-specific. For example, it could be PNG image data passed to 
                  the <code class="methodname">createImage</code> method of 
                  the LCDUI <code class="classname">Image</code> class.
               </p>
               <p>The resource file format consists of the following:</p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>4-byte signature;</p>
                     </li>
                     <li>
                        <p>header length;</p>
                     </li>
                     <li>
                        <p>file header;</p>
                     </li>
                     <li>
                        <p>the resource data</p>
                     </li>
                  </ul>
               </div>
               <p>The first byte of the signature MUST be <code class="constant">0xEE</code> (the number
                  238 expressed in hexadecimal),
                  the second and third bytes MUST be <code class="constant">0x4D</code> and 
                  <code class="constant">0x49</code>
                  (the characters 'M' and 'I' in UTF-8 encoding),
                  and the fourth byte MUST contain the file format and API version. The top four bits
                  of the version represent the major version, while the bottom four bits are the minor version.
                  The minor and major versions MUST follow the version of the API specification. For example,
                  in resource files intended for this version of the API (1.0) the version byte is 
                  <code class="constant">0x10</code>.  
                  
               </p>
               <p>The header length is expressed in bytes. The length MUST NOT include the 
                  4-byte signature.
               </p>
               <p>
                  The file header MUST contain a table of 
                  64-bit entries, one for each resource. The entries combine the following
                  components into one value: the resource ID, the resource type, and the byte offset of
                  the resource from the start of the file. The top 32 bits of the entry MUST contain 
                  the resource ID. The bottom
                  32 bits of the entry MUST contain the combined type and offset, with top eight bits representing the
                  type, and the remaining 24 bits representing the byte offset from the start of the file.
                  The lengths of the resource blocks are calculated from the byte offsets.
                  The last entry in the table is special, with an offset that points past the end
                  of the file.
                  It is only used to calculate the length of the last actual resource.
                  The entries MUST be in ascending order by byte offset.
                  
               </p>
               <p>The following figure illustrates the structure of the entry.</p><pre class="screen">
   bits 63...32     bits 31...0
|----------------|---------------|
   resource ID    type   offset 
                 |----|----------|
</pre><p>Zero-length resources are allowed in the resource file as placeholders
                  for future content. The implementation
                  MUST NOT return <code class="constant">null</code> for resources that have an entry in the offset table. 
                  Instead, for string resources 
                  the implementation MUST return the empty string, and for binary data it MUST return
                  an empty byte array.
               </p>
               <p>
                  If the <code class="classname">ResourceManager</code> implementation supports the caching of resources, it SHOULD read the
                  table of offsets and types into memory when it is 
                  first constructed. Later it MAY also cache the resources it reads. To determine
                  if ResourceManager supports caching, applications can call the 
                  <code class="methodname">isCaching()</code> method of the class. This information
                  could be used to determine if the application itself needs to cache resources or not.
               </p>
               <p>
                  The application specific resources MUST appear in the resource file in
                  ascending order by resource ID. However, the resource ID sequence MAY contain
                  gaps, so that the index table is essentially a sparse array. This allows the implementation
                  to skip straight to the desired resource using only the index, without reading the 
                  file over again from the start.
                  
               </p>
               <p>
                  The type of each resource MUST be encoded in the top eight bits of the lower 32-bit
                  half of the index entry. Currently the following values are defined for the 
                  resource type: 
                  
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>
                           0x01 = string in UTF-8 encoding
                           
                        </p>
                     </li>
                     <li>
                        <p>
                           0x10 = binary data
                           
                        </p>
                     </li>
                     <li>
                        <p>
                           0x00 = end of resources
                           
                        </p>
                     </li>
                  </ul>
               </div>
               <p>
                  The resource type is used by the <code class="methodname">getResource</code> and
                  <code class="methodname">getString</code> methods of the 
                  <code class="classname">ResourceManager</code> class. 
                  Different types of resources MAY occur in arbitrary order inside the resource file,
                  except for the type 0x00, which is not an actual resource. There MUST be only one
                  entry with type 0x00 in the file, and it MUST be the last entry in the offset table.
                  The resource ID associated with that entry MUST be 0x80000000.
               </p>
               <p>The maximum size of the resource file is determined by the 
                  number of resources in the file, their individual sizes and the offset. 
                  A resource file always contains the signature, the header and at least one
                  offset, which MAY be the only one. Hence the minimum
                  size of the resource file is 4 + 4 + 8 = 16 bytes. The use of  
                  invalid resource files MUST result in a 
                  <code class="exceptionname">ResourceException</code> being thrown with error code 
                  <code class="constant">DATA_ERROR</code>.
               </p>
               <p>
                  All data in the resource file with units larger than an octet MUST appear 
                  in the "Big Endian" format (network byte order). 
                  
               </p>
            </div>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d0e654"></a>A sample resource file
                        </h2>
                     </div>
                  </div>
               </div>
               <p>
                  This informative section describes a sample binary resource file.
                  The file contains five resources (three strings and two images). 
                  The hexadecimal dump of the bytes in the file
                  has been augmented with offset labels from the start of the file, 
                  and comments have been inserted (starting with the hash mark #). These
                  offset labels and comments do not appear in the actual file. Also, all
                  the image data is not shown.
               </p><pre class="screen">000000   EE 4D 49 10         # signature and version
000004   00 00 00 30         # length of header
# start of offset table
         # ID=0x00000040, type=0x01, offset 0x000038
000008   00 00 00 40  01 00 00 38   
         # ID=0x00000041, type=0x01, offset 0x00003A
000010   00 00 00 41  01 00 00 3A
         # ID=0x00008000, type=0x10, offset 0x000040   
000018   00 00 80 00  10 00 00 40
         # ID=0x00008001, type=0x01, offset 0x00011F   
000020   00 00 80 01  01 00 01 1F
         # ID=0x00008002, type=0x10, offset 0x000123   
000028   00 00 80 02  10 00 01 23
         # ID=0x80000000, type=0x00 (end of resources), end offset   
000030   80 00 00 00  00 00 02 20   
# start of resources
         # the string 'OK' (ID=0x0040)
000038   4F 4B                    
         # the string 'Cancel' (ID=0x0041)
00003A   43 61 6E 63 65 6C        
         # data for image 'stop.png' (ID=0x8000)
000040   89 50 4E 47 0D 0A 1A 0A... 
         # the string 'Back' (ID=0x8001)  
00011F   42 61 63 6B              
         # data for image 'ok.png' (ID=0x8002)
000123   89 50 4E 47 0D 0A 1A 0A...  
000220   # end of file
</pre><p>
                  The sample resource file contains resources with IDs 0x00000040, 0x00000041,
                  0x00008000, 0x00008001, and 0x00008002.
                  At runtime, when an instance of <code class="classname">ResourceManager</code> 
                  has been created to access the contents of this file, the 
                  call <code class="code">getString(0x00000040)</code> will return the string <code class="literal">"OK"</code>, 
                  and the call <code class="code">getData(0x00008000)</code> 
                  will return the data of the image file <code class="filename">stop.png</code> as a byte array. 
                  (The first call is equivalent to <code class="code">getResource(0x00000040)</code>,
                  and the second is equivalent to <code class="code">getResource(0x00008000)</code>.)
                  See the <code class="classname">ResourceManager</code> class documentation
                  for details about the API calls.
               </p>
               <p>Note that application developers
                  SHOULD define symbolic constants for the application resources.
               </p>
            </div>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d0e689"></a>Advantages of the binary format
                        </h2>
                     </div>
                  </div>
               </div>
               <p>
                  This informative section details the advantages of the binary resource
                  format used in this API over text-based formats,
                  such as the one used by the <code class="classname">PropertyResourceBundle</code> class in 
                  Java 2, Standard Edition.
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>
                           The use of UTF-8 enables the
                           application programmer to use a single character encoding for all text,
                           regardless of the language of the text. In J2SE <code class="classname">PropertyResourceBundles</code>
                           all strings have to be in the ISO Latin-1
                           encoding, and all characters outside that encoding need to be specified in the 
                           \Uxxxx notation. For Chinese and Japanese characters the use of UTF-8 often uses more memory than
                           a native encoding, but does not require the use of \Uxxxx escapes.
                           
                        </p>
                     </li>
                     <li>
                        <p>
                           Integers are used instead of strings to identify resources, taking up less memory.
                           They correspond directly to the resource IDs used by the ResourceManager API.
                           
                        </p>
                     </li>
                     <li>
                        <p>
                           A binary format uses less storage than a text-based format and it can be read 
                           in an efficient manner. Both of these considerations are important in a mobile device.
                           
                        </p>
                     </li>
                     <li>
                        <p>
                           In the binary format strings can contain embedded newlines, unlike in the
                           line-delimited text file format.
                           
                        </p>
                     </li>
                  </ul>
               </div>
            </div>
            <hr>
            <h2>Related documentation</h2>
            <p>JSR-118 Expert Group, Mobile Information Device Profile, version 2.0. 
               Java Community Process. Available at <a href="http://www.jcp.org/en/jsr/detail?id=118" target="_top">http://www.jcp.org/en/jsr/detail?id=118</a>. 
               
            </p>
            <p>
               Connected, Limited Device Configuration Specification, Version 1.1.
               Java Community Process. Available at <a href="http://www.jcp.org/en/jsr/detail?id=139" target="_top">http://www.jcp.org/en/jsr/detail?id=139</a>. 
               
            </p>
            <p>
               Francois Yergeau, UTF-8, a transformation format of ISO 10646, RFC 2279. 
               Available at <a href="http://www.ietf.org/rfc/rfc2279.txt" target="_top">http://www.ietf.org/rfc/rfc2279.txt</a>.
               
            </p>
            <p>    
               S. Bradner, Key Words for use in RFCs to Indicate Requirement Levels, RFC 2119. 
               Available at <a href="http://www.ietf.org/rfc/rfc2119.txt" target="_top">http://www.ietf.org/rfc/rfc2119.txt</a>.
               
            </p>
            <p>The Unicode Consortium, The Unicode Standard, Version 3.0. Addison-Wesley, 2000.
               See <a href="http://www.unicode.org" target="_top">http://www.unicode.org</a>.
               
            </p>
            <p>Common Locale Data Repository (CLDR). See 
               <a href="http://www.unicode.org/cldr/" target="_top">http://www.unicode.org/cldr/</a>.
            </p>
            <p>JAR File Specification. See 
               <a href="http://java.sun.com/j2se/1.4.2/docs/guide/jar/jar.html" target="_top">http://java.sun.com/j2se/1.4.2/docs/guide/jar/jar.html</a>.
            </p>
            <hr>
            <h2>Programming examples</h2>
            <p>This informative section contains programming examples
               for Mobile Internationalization API.
            </p>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d0e756"></a>Using application resources
                        </h2>
                     </div>
                  </div>
               </div>
               <p>These are code fragments from a demonstration MIDlet 
                  that uses a <code class="classname">ResourceManager</code> to load images and strings from binary resource 
                  files in the application's JAR file.
               </p><pre class="programlisting">
import javax.microedition.global.*;

public final class MoonDemo extends MIDlet implements CommandListener {
    private ResourceManager res;

    public static final int PHASE_NEW_MOON = 0;
    .
    .
    .
    public static final int PHASE_WANING_CRESCENT = 7;

    // Images for the different moon phases. 
    // These are loaded when first needed.
    private Image[] phaseImages = new Image[8];
    
    private int currentPhase;  // indicates the current phase shown
    private ImageItem moonPhaseImageItem;  // shows the image in the form
    .
    .
    .
    public MoonDemo() {
        try {
            // Use system default locale. We have English texts in the 
            // common locale for backup.
            res = ResourceManager.getManager("MoonPhases");
        }
        catch (ResourceException re) {
            System.out.println(re.getMessage() 
                + " (" + re.getErrorCode() + ")");
        }
        
        nextCommand = new Command(
            res.getString(MoonPhases.COMMAND_NEXT), Command.SCREEN, 1);
        exitCommand = new Command(
            res.getString(MoonPhases.COMMAND_EXIT), Command.EXIT, 1);

        mainForm = new Form(res.getString(MoonPhases.TEXT_MOON_PHASES));
        mainForm.addCommand(nextCommand);
        mainForm.addCommand(exitCommand);
        mainForm.setCommandListener(this);
        
        moonPhaseImageItem = new ImageItem("", null, 
            ImageItem.LAYOUT_CENTER, "");
        mainForm.append(moonPhaseImageItem);

        updateMainForm();        
        display.setCurrent(mainForm);
    }
    .
    .
    .
    private void updateMainForm() {
        if (phaseImages[currentPhase] == null) {
            // Get the phase image. Use new moon as the base and add the
            // current phase (0 to 7) to get the correct resource ID.
            byte[] imageData = res.getData(
                MoonPhases.IMAGE_NEW_MOON + currentPhase);
            phaseImages[currentPhase] = Image.createImage(
                imageData, 0, imageData.length);
        }

        moonPhaseImageItem.setImage(phaseImages[currentPhase]);
        
        // Just load the text. If the resource manager is caching,
        // the string will come from the heap and not from the JAR. 
        // Use new moon as the ID base.
        String phaseText = res.getString(
            MoonPhases.TEXT_NEW_MOON + currentPhase);
        
        moonPhaseImageItem.setLabel(phaseText);
    }
}

/** Utility class that contains the resource ID constants. */
public final class MoonPhases {     // class name is the basename
    // private constructor to prevent instantiation
    private MoonPhases() { }

    public static final int TEXT_MOON_PHASES = 1;
    public static final int COMMAND_NEXT = 2;
    public static final int COMMAND_EXIT = 3;
    
    public static final int TEXT_NEW_MOON = 11; 
    public static final int TEXT_WAXING_CRESCENT = 12;
    public static final int TEXT_FIRST_QUARTER = 13;
    public static final int TEXT_WAXING_GIBBOUS = 14;
    public static final int TEXT_FULL_MOON = 15;
    public static final int TEXT_WANING_GIBBOUS = 16;
    public static final int TEXT_LAST_QUARTER = 17;
    public static final int TEXT_WANING_CRESCENT = 18;
    
    public static final int IMAGE_NEW_MOON = 111; 
    public static final int IMAGE_WAXING_CRESCENT = 112;
    public static final int IMAGE_FIRST_QUARTER = 113;
    public static final int IMAGE_WAXING_GIBBOUS = 114;
    public static final int IMAGE_FULL_MOON = 115;
    public static final int IMAGE_WANING_GIBBOUS = 116;
    public static final int IMAGE_LAST_QUARTER = 117;
    public static final int IMAGE_WANING_CRESCENT = 118;
}
</pre><p>The MIDlet uses the following directory structure
                  in the JAR file:
               </p><pre class="screen">JAR file root
    |
    |
    +----global----MoonPhases.res
          |
          |
          +----da-DK----MoonPhases.res
               |
               |
               fi-FI----MoonPhases.res
               |
               |
               en-------MoonPhases.res
               |
               |
               hu-HU----MoonPhases.res
</pre></div>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d0e770"></a>Formatting data items
                        </h2>
                     </div>
                  </div>
               </div>
               <p>These are code fragments from a demonstration MIDlet that
                  formats data items correctly for the locale using a <code class="classname">Formatter</code>.
                  The labels and the formatting templates are loaded from a resource
                  file.
               </p><pre class="programlisting">
Calendar now = Calendar.getInstance();

StringItem todaysDate = new StringItem(res.getString(RES_LABEL_DATE),
    fmt.formatDateTime(now, Formatter.DATE_LONG));
todaysDate.setLayout(Item.LAYOUT_NEWLINE_AFTER);
formattingForm.append(todaysDate);
            
StringItem currentTime = new StringItem(res.getString(RES_LABEL_TIME), 
    fmt.formatDateTime(now, Formatter.TIME_LONG));
currentTime.setLayout(Item.LAYOUT_NEWLINE_AFTER);
formattingForm.append(currentTime);

Runtime rt = Runtime.getRuntime();
long totalMemory = rt.totalMemory();
long freeMemory = rt.freeMemory();

// reuse template variable            
String template = res.getString(RES_MESSAGE_TOTAL_MEMORY);
String totalString = fmt.formatNumber(totalMemory);
String totalMegString = fmt.formatNumber(totalMemory / 1048576.0, 1);
String totalMemoryMessage = Formatter.formatMessage(template, 
    new String[] { totalString, totalMegString });
     // in template:   {0}           {1}

float freePercentage = freeMemory / (float) totalMemory;
String freePercentageString = fmt.formatPercentage(freePercentage, 1);
                
template = res.getString(RES_MESSAGE_FREE_MEMORY);
String freeString = fmt.formatNumber(freeMemory);
String freeMegString = fmt.formatNumber(freeMemory / 1048576.0, 1);
String freeMemoryMessage = Formatter.formatMessage(template, 
    new String[] { freeString, freeMegString, freePercentageString });
     // in template:   {0}           {1}               {2}
                
StringItem totalMemoryString = new StringItem(
    res.getString(RES_LABEL_TOTAL_MEMORY), totalMemoryMessage);
totalMemoryString.setLayout(Item.LAYOUT_NEWLINE_AFTER);
formattingForm.append(totalMemoryString);
            
StringItem freeMemoryString = new StringItem(
    res.getString(RES_LABEL_FREE_MEMORY), freeMemoryMessage);
freeMemoryString.setLayout(Item.LAYOUT_NEWLINE_AFTER);
formattingForm.append(freeMemoryString);

StringItem piString = new StringItem(res.getString(RES_LABEL_PI), 
    fmt.formatNumber(Math.PI, 5));
formattingForm.append(piString);
</pre><p>The English language string resources used in this code are:</p><pre class="screen">
RES_LABEL_DATE            "Today's date:"
RES_LABEL_TIME            "Current time:" 
RES_MESSAGE_TOTAL_MEMORY  "{0} bytes ({1} MB)"
RES_LABEL_TOTAL_MEMORY    "Total memory:" 
RES_LABEL_FREE_MEMORY     "Free memory:" 
RES_LABEL_PI              "Value of <span class="symbol">&#960;</span> (to 5 decimal places):"
RES_MESSAGE_FREE_MEMORY   "{0} bytes ({1} MB), {2} free"
</pre></div>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d0e787"></a>Sorting strings
                        </h2>
                     </div>
                  </div>
               </div>
               <p>The following sample code shows how to sort an array of strings
                  in a locale-specific way using an instance of 
                  <code class="classname">StringComparator</code>.
               </p><pre class="programlisting">private StringComparator comp;
    
private void sortList() {
    // Fetch the data from the List widget
    String[] data = new String[collationList.size()];
        
    for (int i = 0; i &lt; data.length; i++) {
        data[i] = collationList.getString(i);            
    }
    
    // Prepare a StringComparator for sorting.
    if (comp == null) {
        comp = new StringComparator();  // use default locale
    }
    
    // Bubble sort; slow but illustrative 
    String hold = null;  // temporary holding area for swap
    for (int pass = 1; pass &lt; data.length; pass++) {  // all passes
        for (int itemIndex = 0; 
                itemIndex &lt; data.length - pass; itemIndex++) {
            int result = <span class="emphasis"><em>comp.compare(
                data[itemIndex], data[itemIndex + 1])</em></span>;
            if (result &gt; 0) {
                // first item belongs after second, c.f. "a[i] &gt; a[i+1]"
                hold = data[itemIndex];
                data[itemIndex] = data[itemIndex + 1];
                data[itemIndex + 1] = hold;
            }
        }
    }
    
    // Populate the list again with the sorted data
    populateCollationList(data);
</pre></div>
<P>

<P>
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Overview</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Package</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="javax/microedition/global/package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="overview-summary.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
<font size=-1>Copyright &#x00A9; 2004-2005 Nokia Corporation. All
			 Rights Reserved.<br/>Java is a trademark of Sun Microsystems, Inc.</font>
</BODY>
</HTML>
